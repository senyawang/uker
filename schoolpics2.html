<!doctype html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>cctvmall</title>
    <meta name="author" content="www.uker.com">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">

    <link rel="stylesheet" href="dist/gmu.css">
    <link rel="stylesheet" href="dist/swiper3.1.0.min.css">
    <link rel="stylesheet" href="css/base.css">

    <style>
        body,html{
            height: 100%;
        }
        .header{
            background: #000;
            color: #fff;
        }
        .header .i-btnback{
            position: static;
        }
        .mainpage{
            position: relative;
            height: 100%;
            background: #000;
        }
        .pic-preview {
            height: 100%;
        }
        .img-tag{
            padding: 5px;
            text-align: left;
        }
        .img-tag a{
            display: inline-block;
            padding: 3px 10px;
            border: 1px solid #ccc;
            border-radius: 3px;
            margin: 3px;
            color: #fff;
            font-size: 14px;
        }
        .sc-pic{
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
        }
        .btn-download{
            position: absolute;
            display: inline-block;
            right: 10px;
            bottom: 10px;
            z-index: 2;
            font-size: 13px;
            padding: 3px;
            color: red!important;
            width: auto!important;
        }
        .swiper-container {
        width: 100%;
        height: 100%;
        height: -webkit-calc(100% - 2rem);
        height: calc(100% - 2rem);
    }
    .swiper-slide {
        text-align: center;
        font-size: 18px;
        padding-bottom: 40px;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        /* Center slide text vertically */
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
    }
    .append-buttons {
        text-align: center;
        margin-top: 20px;
    }
    .append-buttons a {
        display: inline-block;
        border: 1px solid #007aff;
        color: #007aff;
        text-decoration: none;
        padding: 4px 10px;
        border-radius: 4px;
        margin: 0 10px;
        font-size: 13px;
    }
    </style>
</head>
<body>
<div class="mainpage">

    <header class="header">
        <h1 class="title"><span class="J_curIndex">1</span>/3</h1>
        <a class="btn-back" href="#"><i class="i-btnback"></i></a>
    </header>

    <section id="pitcures" class="pic-preview">
        <!-- Swiper -->
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide"><img src="http://school.uker.net/photo/h000/h50/img201410271713110.jpg" alt="牛津大学_牛津大学_University of Oxford 照片_中英网UKER.net"><div class="img-tag sc-pic"><a href="#">校园环境</a></div><a href="http://school.uker.net/photo/h000/h50/img201410271713110.jpg" class="btn-download">下载图片</a></div><div class="swiper-slide"><img src="http://school.uker.net/photo/h000/h50/img201410271712400.jpg" alt="牛津大学_牛津大学_University of Oxford 照片_中英网UKER.net"><div class="img-tag sc-pic"><a href="#">校园环境</a></div><a href="http://school.uker.net/photo/h000/h50/img201410271712400.jpg" class="btn-download">下载图片</a></div><div class="swiper-slide"><img src="http://school.uker.net/photo/h000/h50/img201410271711490.jpg" alt="牛津大学_牛津大学_University of Oxford 照片_中英网UKER.net"><div class="img-tag sc-pic"><a href="#">校园环境</a></div><a href="http://school.uker.net/photo/h000/h50/img201410271711490.jpg" class="btn-download">下载图片</a></div><div class="swiper-slide"><img src="http://school.uker.net/photo/h000/h50/img201410271711240.jpg" alt="牛津大学_牛津大学_University of Oxford 照片_中英网UKER.net"><div class="img-tag sc-pic"><a href="#">校园环境</a></div><a href="http://school.uker.net/photo/h000/h50/img201410271711240.jpg" class="btn-download">下载图片</a></div><div class="swiper-slide"><img src="http://school.uker.net/photo/h000/h50/img201410271711040.jpg" alt="牛津大学_牛津大学_University of Oxford 照片_中英网UKER.net"><div class="img-tag sc-pic"><a href="#">校园环境</a></div><a href="http://school.uker.net/photo/h000/h50/img201410271711040.jpg" class="btn-download">下载图片</a></div><div class="swiper-slide"><img src="http://school.uker.net/photo/h000/h50/img201410271709330.jpg" alt="牛津大学_牛津大学_University of Oxford 照片_中英网UKER.net"><div class="img-tag sc-pic"><a href="#">校园环境</a></div><a href="http://school.uker.net/photo/h000/h50/img201410271709330.jpg" class="btn-download">下载图片</a></div><div class="swiper-slide"><img src="http://school.uker.net/photo/h000/h48/img201407151049190.jpg" alt="牛津大学_牛津大学_University of Oxford 照片_中英网UKER.net"><div class="img-tag sc-pic"><a href="#">校园环境</a></div><a href="http://school.uker.net/photo/h000/h48/img201407151049190.jpg" class="btn-download">下载图片</a></div>
            </div>
            <!-- Add Arrows -->
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        </div>
    </section>
    
</div>

<input type="hidden" id="currentIndex" value="1">

<script id="loadMore" type="text/html">
    {{each imgData as value 3}}
        <div class="swiper-slide">
            <img src="{{value.src}}" alt="{{value.title}}">
            <div class="img-tag sc-pic">
                <a href="#">校园环境</a>
            </div>
            <a href="{{value.src}}" class="btn-download">下载图片</a>
        </div>
    {{/each}}
</script>


<script src="dist/uker.min.0.0.1.js"></script>
<script src="dist/swiper3.1.0.jquery.min.js"></script>
<script src="js/app/main.js"></script>
<script type="text/javascript">

    
var imgData = [{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u6821\u56ed\u73af\u5883"],"src":"http:\/\/school.uker.net\/photo\/h000\/h50\/img201410271713110.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u6821\u56ed\u73af\u5883"],"src":"http:\/\/school.uker.net\/photo\/h000\/h50\/img201410271712400.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u6821\u56ed\u73af\u5883"],"src":"http:\/\/school.uker.net\/photo\/h000\/h50\/img201410271711490.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u6821\u56ed\u73af\u5883"],"src":"http:\/\/school.uker.net\/photo\/h000\/h50\/img201410271711240.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u6821\u56ed\u73af\u5883"],"src":"http:\/\/school.uker.net\/photo\/h000\/h50\/img201410271711040.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u6821\u56ed\u73af\u5883"],"src":"http:\/\/school.uker.net\/photo\/h000\/h50\/img201410271709330.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u6821\u56ed\u73af\u5883"],"src":"http:\/\/school.uker.net\/photo\/h000\/h48\/img201407151049190.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5546\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h45\/img201406091907060.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u533b\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h45\/img201406091849060.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u533b\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h45\/img201406091848380.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u6587\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h45\/img201406091848170.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u793e\u4f1a\u79d1\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h45\/img201406091847560.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5546\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h45\/img201406091847310.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5546\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h45\/img201406091847020.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5546\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h45\/img201406091846340.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u7406\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h45\/img201406091846050.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u7406\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h45\/img201406091845430.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5065\u5eb7\u79d1\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h45\/img201406091845080.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5bbf\u820d"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281144430.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5bbf\u820d"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281145060.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5bbf\u820d"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281145240.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5bbf\u820d"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281145430.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5bbf\u820d"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281146030.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281146270.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281146540.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u6821\u56ed\u73af\u5883"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281152230.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281152420.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281153000.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281153270.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281154550.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281155170.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281155400.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281156020.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281156320.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281157020.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281157360.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","tag":["\u5927\u5b66\u5b66\u9662"],"src":"http:\/\/school.uker.net\/photo\/h000\/h44\/img201405281158050.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","src":"http:\/\/school.uker.net\/photo\/h000\/h38\/img201405082035390.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","src":"http:\/\/school.uker.net\/photo\/h000\/h38\/img201405082035140.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","src":"http:\/\/school.uker.net\/photo\/h000\/h38\/img201405082034580.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","src":"http:\/\/school.uker.net\/photo\/h000\/h38\/img201405082034420.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","src":"http:\/\/school.uker.net\/photo\/h000\/h38\/img201405082034260.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","src":"http:\/\/school.uker.net\/photo\/h000\/h38\/img201405082034090.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","src":"http:\/\/school.uker.net\/photo\/h000\/h34\/img201309221229100.jpg"},{"title":"\u725b\u6d25\u5927\u5b66_\u725b\u6d25\u5927\u5b66_University of Oxford \u7167\u7247_\u4e2d\u82f1\u7f51UKER.net","src":"http:\/\/school.uker.net\/photo\/h000\/h34\/img201309221228200.jpg"}];



var inithtml = '';

var prephtml = '',
    apphtml = '',
    lastIndex,
    curImgIndex,
    curIndex;

    curImgIndex = curIndex = $('#currentIndex').val();

function creathtml(){

    var hnum = (curIndex*1 <= 2) ? 0 : (curIndex*1-3);
    
    for (var h = hnum; h < 7; h++) {
        console.log(hnum)
        inithtml += '<div class="swiper-slide">'+
                        '<img src="'+ imgData[h].src +'" alt="'+imgData[h].title+'">'+
                        '<div class="img-tag sc-pic">'+
                            '<a href="#">校园环境</a>'+
                        '</div>'+
                        '<a href="'+ imgData[h].src +'" class="btn-download">下载图片</a>'+
                    '</div>';
    };

    $('.swiper-wrapper').append(inithtml);

    console.log(inithtml)

}


    $('.J_curIndex').text(curIndex*1+1);

    // creathtml();


    var swiper = new Swiper('.swiper-container', {
        pagination: '.swiper-pagination',
        nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
        initialSlide: $('#currentIndex').val(),
        slidesPerView: 1,
        centeredSlides: true,
        paginationClickable: true,
        spaceBetween: 0,
        onSlideChangeStart: function(swiper){

        },
        onSlideChangeEnd: function(swiper){

            if(swiper.activeIndex > 2) {
                slidingAction();
            }else if(){

                curImgIndex--;
            }

            lastIndex = swiper.activeIndex;

        },
    });

    
    function slidingAction () {

        if(lastIndex && lastIndex < swiper.activeIndex){
                var i = curImgIndex + 3;
                curImgIndex++;
                if(i > imgData.length) return;
                apphtml = '<div class="swiper-slide">'+
                                '<img src="'+ imgData[i].src +'" alt="'+imgData[i].title+'">'+
                                '<div class="img-tag sc-pic">'+
                                    '<a href="#">校园环境</a>'+
                                '</div>'+
                                '<a href="'+ imgData[i].src +'" class="btn-download">下载图片</a>'+
                            '</div>';

                swiper.removeSlide(swiper.activeIndex-3);
                swiper.appendSlide(apphtml);
                // curImgIndex++;


        }else if(lastIndex && lastIndex > swiper.activeIndex){
                var i = curImgIndex - 3;
                curImgIndex--;
                if(i < 0) return;
                prephtml = '<div class="swiper-slide">'+
                                '<img src="'+ imgData[i].src +'" alt="'+imgData[i].title+'">'+
                                '<div class="img-tag sc-pic">'+
                                    '<a href="#">校园环境</a>'+
                                '</div>'+
                                '<a href="'+ imgData[i].src +'" class="btn-download">下载图片</a>'+
                            '</div>';
                swiper.removeSlide(swiper.activeIndex+3);

                swiper.prependSlide(prephtml);

                // curImgIndex--;


        }

        console.log(curImgIndex)

    }


    

</script>

</body>
</html>
