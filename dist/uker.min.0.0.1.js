!function(undefined){String.prototype.trim===undefined&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===undefined&&(Array.prototype.reduce=function(fun){if(void 0===this||null===this)throw new TypeError;var accumulator,t=Object(this),len=t.length>>>0,k=0;if("function"!=typeof fun)throw new TypeError;if(0==len&&1==arguments.length)throw new TypeError;if(arguments.length>=2)accumulator=arguments[1];else for(;;){if(k in t){accumulator=t[k++];break}if(++k>=len)throw new TypeError}for(;len>k;)k in t&&(accumulator=fun.call(undefined,accumulator,t[k],k,t)),k++;return accumulator})}();var Zepto=function(){function type(obj){return null==obj?String(obj):class2type[toString.call(obj)]||"object"}function isFunction(value){return"function"==type(value)}function isWindow(obj){return null!=obj&&obj==obj.window}function isDocument(obj){return null!=obj&&obj.nodeType==obj.DOCUMENT_NODE}function isObject(obj){return"object"==type(obj)}function isPlainObject(obj){return isObject(obj)&&!isWindow(obj)&&obj.__proto__==Object.prototype}function isArray(value){return value instanceof Array}function likeArray(obj){return"number"==typeof obj.length}function compact(array){return filter.call(array,function(item){return null!=item})}function flatten(array){return array.length>0?$.fn.concat.apply([],array):array}function dasherize(str){return str.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function classRE(name){return name in classCache?classCache[name]:classCache[name]=new RegExp("(^|\\s)"+name+"(\\s|$)")}function maybeAddPx(name,value){return"number"!=typeof value||cssNumber[dasherize(name)]?value:value+"px"}function defaultDisplay(nodeName){var element,display;return elementDisplay[nodeName]||(element=document.createElement(nodeName),document.body.appendChild(element),display=getComputedStyle(element,"").getPropertyValue("display"),element.parentNode.removeChild(element),"none"==display&&(display="block"),elementDisplay[nodeName]=display),elementDisplay[nodeName]}function children(element){return"children"in element?slice.call(element.children):$.map(element.childNodes,function(node){return 1==node.nodeType?node:void 0})}function extend(target,source,deep){for(key in source)deep&&(isPlainObject(source[key])||isArray(source[key]))?(isPlainObject(source[key])&&!isPlainObject(target[key])&&(target[key]={}),isArray(source[key])&&!isArray(target[key])&&(target[key]=[]),extend(target[key],source[key],deep)):source[key]!==undefined&&(target[key]=source[key])}function filtered(nodes,selector){return selector===undefined?$(nodes):$(nodes).filter(selector)}function funcArg(context,arg,idx,payload){return isFunction(arg)?arg.call(context,idx,payload):arg}function setAttribute(node,name,value){null==value?node.removeAttribute(name):node.setAttribute(name,value)}function className(node,value){var klass=node.className,svg=klass&&klass.baseVal!==undefined;return value===undefined?svg?klass.baseVal:klass:void(svg?klass.baseVal=value:node.className=value)}function deserializeValue(value){var num;try{return value?"true"==value||("false"==value?!1:"null"==value?null:isNaN(num=Number(value))?/^[\[\{]/.test(value)?$.parseJSON(value):value:num):value}catch(e){return value}}function traverseNode(node,fun){fun(node);for(var key in node.childNodes)traverseNode(node.childNodes[key],fun)}var undefined,key,$,classList,camelize,uniq,emptyArray=[],slice=emptyArray.slice,filter=emptyArray.filter,document=window.document,elementDisplay={},classCache={},getComputedStyle=document.defaultView.getComputedStyle,cssNumber={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},fragmentRE=/^\s*<(\w+|!)[^>]*>/,tagExpanderRE=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rootNodeRE=/^(?:body|html)$/i,methodAttributes=["val","css","html","text","data","width","height","offset"],adjacencyOperators=["after","prepend","before","append"],table=document.createElement("table"),tableRow=document.createElement("tr"),containers={tr:document.createElement("tbody"),tbody:table,thead:table,tfoot:table,td:tableRow,th:tableRow,"*":document.createElement("div")},readyRE=/complete|loaded|interactive/,classSelectorRE=/^\.([\w-]+)$/,idSelectorRE=/^#([\w-]*)$/,tagSelectorRE=/^[\w-]+$/,class2type={},toString=class2type.toString,zepto={},tempParent=document.createElement("div");return zepto.matches=function(element,selector){if(!element||1!==element.nodeType)return!1;var matchesSelector=element.webkitMatchesSelector||element.mozMatchesSelector||element.oMatchesSelector||element.matchesSelector;if(matchesSelector)return matchesSelector.call(element,selector);var match,parent=element.parentNode,temp=!parent;return temp&&(parent=tempParent).appendChild(element),match=~zepto.qsa(parent,selector).indexOf(element),temp&&tempParent.removeChild(element),match},camelize=function(str){return str.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():""})},uniq=function(array){return filter.call(array,function(item,idx){return array.indexOf(item)==idx})},zepto.fragment=function(html,name,properties){html.replace&&(html=html.replace(tagExpanderRE,"<$1></$2>")),name===undefined&&(name=fragmentRE.test(html)&&RegExp.$1),name in containers||(name="*");var nodes,dom,container=containers[name];return container.innerHTML=""+html,dom=$.each(slice.call(container.childNodes),function(){container.removeChild(this)}),isPlainObject(properties)&&(nodes=$(dom),$.each(properties,function(key,value){methodAttributes.indexOf(key)>-1?nodes[key](value):nodes.attr(key,value)})),dom},zepto.Z=function(dom,selector){return dom=dom||[],dom.__proto__=$.fn,dom.selector=selector||"",dom},zepto.isZ=function(object){return object instanceof zepto.Z},zepto.init=function(selector,context){if(selector){if(isFunction(selector))return $(document).ready(selector);if(zepto.isZ(selector))return selector;var dom;if(isArray(selector))dom=compact(selector);else if(isObject(selector))dom=[isPlainObject(selector)?$.extend({},selector):selector],selector=null;else if(fragmentRE.test(selector))dom=zepto.fragment(selector.trim(),RegExp.$1,context),selector=null;else{if(context!==undefined)return $(context).find(selector);dom=zepto.qsa(document,selector)}return zepto.Z(dom,selector)}return zepto.Z()},$=function(selector,context){return zepto.init(selector,context)},$.extend=function(target){var deep,args=slice.call(arguments,1);return"boolean"==typeof target&&(deep=target,target=args.shift()),args.forEach(function(arg){extend(target,arg,deep)}),target},zepto.qsa=function(element,selector){var found;return isDocument(element)&&idSelectorRE.test(selector)?(found=element.getElementById(RegExp.$1))?[found]:[]:1!==element.nodeType&&9!==element.nodeType?[]:slice.call(classSelectorRE.test(selector)?element.getElementsByClassName(RegExp.$1):tagSelectorRE.test(selector)?element.getElementsByTagName(selector):element.querySelectorAll(selector))},$.contains=function(parent,node){return parent!==node&&parent.contains(node)},$.type=type,$.isFunction=isFunction,$.isWindow=isWindow,$.isArray=isArray,$.isPlainObject=isPlainObject,$.isEmptyObject=function(obj){var name;for(name in obj)return!1;return!0},$.inArray=function(elem,array,i){return emptyArray.indexOf.call(array,elem,i)},$.camelCase=camelize,$.trim=function(str){return str.trim()},$.uuid=0,$.support={},$.expr={},$.map=function(elements,callback){var value,i,key,values=[];if(likeArray(elements))for(i=0;i<elements.length;i++)value=callback(elements[i],i),null!=value&&values.push(value);else for(key in elements)value=callback(elements[key],key),null!=value&&values.push(value);return flatten(values)},$.each=function(elements,callback){var i,key;if(likeArray(elements)){for(i=0;i<elements.length;i++)if(callback.call(elements[i],i,elements[i])===!1)return elements}else for(key in elements)if(callback.call(elements[key],key,elements[key])===!1)return elements;return elements},$.grep=function(elements,callback){return filter.call(elements,callback)},window.JSON&&($.parseJSON=JSON.parse),$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),$.fn={forEach:emptyArray.forEach,reduce:emptyArray.reduce,push:emptyArray.push,sort:emptyArray.sort,indexOf:emptyArray.indexOf,concat:emptyArray.concat,map:function(fn){return $($.map(this,function(el,i){return fn.call(el,i,el)}))},slice:function(){return $(slice.apply(this,arguments))},ready:function(callback){return readyRE.test(document.readyState)?callback($):document.addEventListener("DOMContentLoaded",function(){callback($)},!1),this},get:function(idx){return idx===undefined?slice.call(this):this[idx>=0?idx:idx+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(callback){return emptyArray.every.call(this,function(el,idx){return callback.call(el,idx,el)!==!1}),this},filter:function(selector){return isFunction(selector)?this.not(this.not(selector)):$(filter.call(this,function(element){return zepto.matches(element,selector)}))},add:function(selector,context){return $(uniq(this.concat($(selector,context))))},is:function(selector){return this.length>0&&zepto.matches(this[0],selector)},not:function(selector){var nodes=[];if(isFunction(selector)&&selector.call!==undefined)this.each(function(idx){selector.call(this,idx)||nodes.push(this)});else{var excludes="string"==typeof selector?this.filter(selector):likeArray(selector)&&isFunction(selector.item)?slice.call(selector):$(selector);this.forEach(function(el){excludes.indexOf(el)<0&&nodes.push(el)})}return $(nodes)},has:function(selector){return this.filter(function(){return isObject(selector)?$.contains(this,selector):$(this).find(selector).size()})},eq:function(idx){return-1===idx?this.slice(idx):this.slice(idx,+idx+1)},first:function(){var el=this[0];return el&&!isObject(el)?el:$(el)},last:function(){var el=this[this.length-1];return el&&!isObject(el)?el:$(el)},find:function(selector){var result,$this=this;return result="object"==typeof selector?$(selector).filter(function(){var node=this;return emptyArray.some.call($this,function(parent){return $.contains(parent,node)})}):1==this.length?$(zepto.qsa(this[0],selector)):this.map(function(){return zepto.qsa(this,selector)})},closest:function(selector,context){var node=this[0],collection=!1;for("object"==typeof selector&&(collection=$(selector));node&&!(collection?collection.indexOf(node)>=0:zepto.matches(node,selector));)node=node!==context&&!isDocument(node)&&node.parentNode;return $(node)},parents:function(selector){for(var ancestors=[],nodes=this;nodes.length>0;)nodes=$.map(nodes,function(node){return(node=node.parentNode)&&!isDocument(node)&&ancestors.indexOf(node)<0?(ancestors.push(node),node):void 0});return filtered(ancestors,selector)},parent:function(selector){return filtered(uniq(this.pluck("parentNode")),selector)},children:function(selector){return filtered(this.map(function(){return children(this)}),selector)},contents:function(){return this.map(function(){return slice.call(this.childNodes)})},siblings:function(selector){return filtered(this.map(function(i,el){return filter.call(children(el.parentNode),function(child){return child!==el})}),selector)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(property){return $.map(this,function(el){return el[property]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=defaultDisplay(this.nodeName))})},replaceWith:function(newContent){return this.before(newContent).remove()},wrap:function(structure){var func=isFunction(structure);if(this[0]&&!func)var dom=$(structure).get(0),clone=dom.parentNode||this.length>1;return this.each(function(index){$(this).wrapAll(func?structure.call(this,index):clone?dom.cloneNode(!0):dom)})},wrapAll:function(structure){if(this[0]){$(this[0]).before(structure=$(structure));for(var children;(children=structure.children()).length;)structure=children.first();$(structure).append(this)}return this},wrapInner:function(structure){var func=isFunction(structure);return this.each(function(index){var self=$(this),contents=self.contents(),dom=func?structure.call(this,index):structure;contents.length?contents.wrapAll(dom):self.append(dom)})},unwrap:function(){return this.parent().each(function(){$(this).replaceWith($(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(setting){return this.each(function(){var el=$(this);(setting===undefined?"none"==el.css("display"):setting)?el.show():el.hide()})},prev:function(selector){return $(this.pluck("previousElementSibling")).filter(selector||"*")},next:function(selector){return $(this.pluck("nextElementSibling")).filter(selector||"*")},html:function(html){return html===undefined?this.length>0?this[0].innerHTML:null:this.each(function(idx){var originHtml=this.innerHTML;$(this).empty().append(funcArg(this,html,idx,originHtml))})},text:function(text){return text===undefined?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=text})},attr:function(name,value){var result;return"string"==typeof name&&value===undefined?0==this.length||1!==this[0].nodeType?undefined:"value"==name&&"INPUT"==this[0].nodeName?this.val():!(result=this[0].getAttribute(name))&&name in this[0]?this[0][name]:result:this.each(function(idx){if(1===this.nodeType)if(isObject(name))for(key in name)setAttribute(this,key,name[key]);else setAttribute(this,name,funcArg(this,value,idx,this.getAttribute(name)))})},removeAttr:function(name){return this.each(function(){1===this.nodeType&&setAttribute(this,name)})},prop:function(name,value){return value===undefined?this[0]&&this[0][name]:this.each(function(idx){this[name]=funcArg(this,value,idx,this[name])})},data:function(name,value){var data=this.attr("data-"+dasherize(name),value);return null!==data?deserializeValue(data):undefined},val:function(value){return value===undefined?this[0]&&(this[0].multiple?$(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(idx){this.value=funcArg(this,value,idx,this.value)})},offset:function(coordinates){if(coordinates)return this.each(function(index){var $this=$(this),coords=funcArg(this,coordinates,index,$this.offset()),parentOffset=$this.offsetParent().offset(),props={top:coords.top-parentOffset.top,left:coords.left-parentOffset.left};"static"==$this.css("position")&&(props.position="relative"),$this.css(props)});if(0==this.length)return null;var obj=this[0].getBoundingClientRect();return{left:obj.left+window.pageXOffset,top:obj.top+window.pageYOffset,width:Math.round(obj.width),height:Math.round(obj.height)}},css:function(property,value){if(arguments.length<2&&"string"==typeof property)return this[0]&&(this[0].style[camelize(property)]||getComputedStyle(this[0],"").getPropertyValue(property));var css="";if("string"==type(property))value||0===value?css=dasherize(property)+":"+maybeAddPx(property,value):this.each(function(){this.style.removeProperty(dasherize(property))});else for(key in property)property[key]||0===property[key]?css+=dasherize(key)+":"+maybeAddPx(key,property[key])+";":this.each(function(){this.style.removeProperty(dasherize(key))});return this.each(function(){this.style.cssText+=";"+css})},index:function(element){return element?this.indexOf($(element)[0]):this.parent().children().indexOf(this[0])},hasClass:function(name){return emptyArray.some.call(this,function(el){return this.test(className(el))},classRE(name))},addClass:function(name){return this.each(function(idx){classList=[];var cls=className(this),newName=funcArg(this,name,idx,cls);newName.split(/\s+/g).forEach(function(klass){$(this).hasClass(klass)||classList.push(klass)},this),classList.length&&className(this,cls+(cls?" ":"")+classList.join(" "))})},removeClass:function(name){return this.each(function(idx){return name===undefined?className(this,""):(classList=className(this),funcArg(this,name,idx,classList).split(/\s+/g).forEach(function(klass){classList=classList.replace(classRE(klass)," ")}),void className(this,classList.trim()))})},toggleClass:function(name,when){return this.each(function(idx){var $this=$(this),names=funcArg(this,name,idx,className(this));names.split(/\s+/g).forEach(function(klass){(when===undefined?!$this.hasClass(klass):when)?$this.addClass(klass):$this.removeClass(klass)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rootNodeRE.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();return offset.top-=parseFloat($(elem).css("margin-top"))||0,offset.left-=parseFloat($(elem).css("margin-left"))||0,parentOffset.top+=parseFloat($(offsetParent[0]).css("border-top-width"))||0,parentOffset.left+=parseFloat($(offsetParent[0]).css("border-left-width"))||0,{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}}},offsetParent:function(){return this.map(function(){for(var parent=this.offsetParent||document.body;parent&&!rootNodeRE.test(parent.nodeName)&&"static"==$(parent).css("position");)parent=parent.offsetParent;return parent})}},$.fn.detach=$.fn.remove,["width","height"].forEach(function(dimension){$.fn[dimension]=function(value){var offset,el=this[0],Dimension=dimension.replace(/./,function(m){return m[0].toUpperCase()});return value===undefined?isWindow(el)?el["inner"+Dimension]:isDocument(el)?el.documentElement["offset"+Dimension]:(offset=this.offset())&&offset[dimension]:this.each(function(idx){el=$(this),el.css(dimension,funcArg(this,value,idx,el[dimension]()))})}}),adjacencyOperators.forEach(function(operator,operatorIndex){var inside=operatorIndex%2;$.fn[operator]=function(){var argType,parent,nodes=$.map(arguments,function(arg){return argType=type(arg),"object"==argType||"array"==argType||null==arg?arg:zepto.fragment(arg)}),copyByClone=this.length>1;return nodes.length<1?this:this.each(function(_,target){parent=inside?target:target.parentNode,target=0==operatorIndex?target.nextSibling:1==operatorIndex?target.firstChild:2==operatorIndex?target:null,nodes.forEach(function(node){if(copyByClone)node=node.cloneNode(!0);else if(!parent)return $(node).remove();traverseNode(parent.insertBefore(node,target),function(el){null==el.nodeName||"SCRIPT"!==el.nodeName.toUpperCase()||el.type&&"text/javascript"!==el.type||el.src||window.eval.call(window,el.innerHTML)})})})},$.fn[inside?operator+"To":"insert"+(operatorIndex?"Before":"After")]=function(html){return $(html)[operator](this),this}}),zepto.Z.prototype=$.fn,zepto.uniq=uniq,zepto.deserializeValue=deserializeValue,$.zepto=zepto,$}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function($){function detect(ua){var os=this.os={},browser=this.browser={},webkit=ua.match(/WebKit\/([\d.]+)/),android=ua.match(/(Android)\s+([\d.]+)/),ipad=ua.match(/(iPad).*OS\s([\d_]+)/),iphone=!ipad&&ua.match(/(iPhone\sOS)\s([\d_]+)/),webos=ua.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),touchpad=webos&&ua.match(/TouchPad/),kindle=ua.match(/Kindle\/([\d.]+)/),silk=ua.match(/Silk\/([\d._]+)/),blackberry=ua.match(/(BlackBerry).*Version\/([\d.]+)/),bb10=ua.match(/(BB10).*Version\/([\d.]+)/),rimtabletos=ua.match(/(RIM\sTablet\sOS)\s([\d.]+)/),playbook=ua.match(/PlayBook/),chrome=ua.match(/Chrome\/([\d.]+)/)||ua.match(/CriOS\/([\d.]+)/),firefox=ua.match(/Firefox\/([\d.]+)/);(browser.webkit=!!webkit)&&(browser.version=webkit[1]),android&&(os.android=!0,os.version=android[2]),iphone&&(os.ios=os.iphone=!0,os.version=iphone[2].replace(/_/g,".")),ipad&&(os.ios=os.ipad=!0,os.version=ipad[2].replace(/_/g,".")),webos&&(os.webos=!0,os.version=webos[2]),touchpad&&(os.touchpad=!0),blackberry&&(os.blackberry=!0,os.version=blackberry[2]),bb10&&(os.bb10=!0,os.version=bb10[2]),rimtabletos&&(os.rimtabletos=!0,os.version=rimtabletos[2]),playbook&&(browser.playbook=!0),kindle&&(os.kindle=!0,os.version=kindle[1]),silk&&(browser.silk=!0,browser.version=silk[1]),!silk&&os.android&&ua.match(/Kindle Fire/)&&(browser.silk=!0),chrome&&(browser.chrome=!0,browser.version=chrome[1]),firefox&&(browser.firefox=!0,browser.version=firefox[1]),os.tablet=!!(ipad||playbook||android&&!ua.match(/Mobile/)||firefox&&ua.match(/Tablet/)),os.phone=!(os.tablet||!(android||iphone||webos||blackberry||bb10||chrome&&ua.match(/Android/)||chrome&&ua.match(/CriOS\/([\d.]+)/)||firefox&&ua.match(/Mobile/)))}detect.call($,navigator.userAgent),$.__detect=detect}(Zepto),function($){function zid(element){return element._zid||(element._zid=_zid++)}function findHandlers(element,event,fn,selector){if(event=parse(event),event.ns)var matcher=matcherFor(event.ns);return(handlers[zid(element)]||[]).filter(function(handler){return!(!handler||event.e&&handler.e!=event.e||event.ns&&!matcher.test(handler.ns)||fn&&zid(handler.fn)!==zid(fn)||selector&&handler.sel!=selector)})}function parse(event){var parts=(""+event).split(".");return{e:parts[0],ns:parts.slice(1).sort().join(" ")}}function matcherFor(ns){return new RegExp("(?:^| )"+ns.replace(" "," .* ?")+"(?: |$)")}function eachEvent(events,fn,iterator){"string"!=$.type(events)?$.each(events,iterator):events.split(/\s/).forEach(function(type){iterator(type,fn)})}function eventCapture(handler,captureSetting){return handler.del&&("focus"==handler.e||"blur"==handler.e)||!!captureSetting}function realEvent(type){return hover[type]||type}function add(element,events,fn,selector,getDelegate,capture){var id=zid(element),set=handlers[id]||(handlers[id]=[]);eachEvent(events,fn,function(event,fn){var handler=parse(event);handler.fn=fn,handler.sel=selector,handler.e in hover&&(fn=function(e){var related=e.relatedTarget;return!related||related!==this&&!$.contains(this,related)?handler.fn.apply(this,arguments):void 0}),handler.del=getDelegate&&getDelegate(fn,event);var callback=handler.del||fn;handler.proxy=function(e){var result=callback.apply(element,[e].concat(e.data));return result===!1&&(e.preventDefault(),e.stopPropagation()),result},handler.i=set.length,set.push(handler),element.addEventListener(realEvent(handler.e),handler.proxy,eventCapture(handler,capture))})}function remove(element,events,fn,selector,capture){var id=zid(element);eachEvent(events||"",fn,function(event,fn){findHandlers(element,event,fn,selector).forEach(function(handler){delete handlers[id][handler.i],element.removeEventListener(realEvent(handler.e),handler.proxy,eventCapture(handler,capture))})})}function createProxy(event){var key,proxy={originalEvent:event};for(key in event)ignoreProperties.test(key)||void 0===event[key]||(proxy[key]=event[key]);return $.each(eventMethods,function(name,predicate){proxy[name]=function(){return this[predicate]=returnTrue,event[name].apply(event,arguments)},proxy[predicate]=returnFalse}),proxy}function fix(event){if(!("defaultPrevented"in event)){event.defaultPrevented=!1;var prevent=event.preventDefault;event.preventDefault=function(){this.defaultPrevented=!0,prevent.call(this)}}}var handlers=($.zepto.qsa,{}),_zid=1,specialEvents={},hover={mouseenter:"mouseover",mouseleave:"mouseout"};specialEvents.click=specialEvents.mousedown=specialEvents.mouseup=specialEvents.mousemove="MouseEvents",$.event={add:add,remove:remove},$.proxy=function(fn,context){if($.isFunction(fn)){var proxyFn=function(){return fn.apply(context,arguments)};return proxyFn._zid=zid(fn),proxyFn}if("string"==typeof context)return $.proxy(fn[context],fn);throw new TypeError("expected function")},$.fn.bind=function(event,callback){return this.each(function(){add(this,event,callback)})},$.fn.unbind=function(event,callback){return this.each(function(){remove(this,event,callback)})},$.fn.one=function(event,callback){return this.each(function(i,element){add(this,event,callback,null,function(fn,type){return function(){var result=fn.apply(element,arguments);return remove(element,type,fn),result}})})};var returnTrue=function(){return!0},returnFalse=function(){return!1},ignoreProperties=/^([A-Z]|layer[XY]$)/,eventMethods={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};$.fn.delegate=function(selector,event,callback){return this.each(function(i,element){add(element,event,callback,selector,function(fn){return function(e){var evt,match=$(e.target).closest(selector,element).get(0);return match?(evt=$.extend(createProxy(e),{currentTarget:match,liveFired:element}),fn.apply(match,[evt].concat([].slice.call(arguments,1)))):void 0}})})},$.fn.undelegate=function(selector,event,callback){return this.each(function(){remove(this,event,callback,selector)})},$.fn.live=function(event,callback){return $(document.body).delegate(this.selector,event,callback),this},$.fn.die=function(event,callback){return $(document.body).undelegate(this.selector,event,callback),this},$.fn.on=function(event,selector,callback){return!selector||$.isFunction(selector)?this.bind(event,selector||callback):this.delegate(selector,event,callback)},$.fn.off=function(event,selector,callback){return!selector||$.isFunction(selector)?this.unbind(event,selector||callback):this.undelegate(selector,event,callback)},$.fn.trigger=function(event,data){return("string"==typeof event||$.isPlainObject(event))&&(event=$.Event(event)),fix(event),event.data=data,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(event)})},$.fn.triggerHandler=function(event,data){var e,result;return this.each(function(i,element){e=createProxy("string"==typeof event?$.Event(event):event),e.data=data,e.target=element,$.each(findHandlers(element,event.type||event),function(i,handler){return result=handler.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),result},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(event){$.fn[event]=function(callback){return callback?this.bind(event,callback):this.trigger(event)}}),["focus","blur"].forEach(function(name){$.fn[name]=function(callback){return callback?this.bind(name,callback):this.each(function(){try{this[name]()}catch(e){}}),this}}),$.Event=function(type,props){"string"!=typeof type&&(props=type,type=props.type);var event=document.createEvent(specialEvents[type]||"Events"),bubbles=!0;if(props)for(var name in props)"bubbles"==name?bubbles=!!props[name]:event[name]=props[name];return event.initEvent(type,bubbles,!0,null,null,null,null,null,null,null,null,null,null,null,null),event.isDefaultPrevented=function(){return this.defaultPrevented},event}}(Zepto),function($){function triggerAndReturn(context,eventName,data){var event=$.Event(eventName);return $(context).trigger(event,data),!event.defaultPrevented}function triggerGlobal(settings,context,eventName,data){return settings.global?triggerAndReturn(context||document,eventName,data):void 0}function ajaxStart(settings){settings.global&&0===$.active++&&triggerGlobal(settings,null,"ajaxStart")}function ajaxStop(settings){settings.global&&!--$.active&&triggerGlobal(settings,null,"ajaxStop")}function ajaxBeforeSend(xhr,settings){var context=settings.context;return settings.beforeSend.call(context,xhr,settings)===!1||triggerGlobal(settings,context,"ajaxBeforeSend",[xhr,settings])===!1?!1:void triggerGlobal(settings,context,"ajaxSend",[xhr,settings])}function ajaxSuccess(data,xhr,settings){var context=settings.context,status="success";settings.success.call(context,data,status,xhr),triggerGlobal(settings,context,"ajaxSuccess",[xhr,settings,data]),ajaxComplete(status,xhr,settings)}function ajaxError(error,type,xhr,settings){var context=settings.context;settings.error.call(context,xhr,type,error),triggerGlobal(settings,context,"ajaxError",[xhr,settings,error]),ajaxComplete(type,xhr,settings)}function ajaxComplete(status,xhr,settings){var context=settings.context;settings.complete.call(context,xhr,status),triggerGlobal(settings,context,"ajaxComplete",[xhr,settings]),ajaxStop(settings)}function empty(){}function mimeToDataType(mime){return mime&&(mime=mime.split(";",2)[0]),mime&&(mime==htmlType?"html":mime==jsonType?"json":scriptTypeRE.test(mime)?"script":xmlTypeRE.test(mime)&&"xml")||"text"}function appendQuery(url,query){return(url+"&"+query).replace(/[&?]{1,2}/,"?")}function serializeData(options){options.processData&&options.data&&"string"!=$.type(options.data)&&(options.data=$.param(options.data,options.traditional)),!options.data||options.type&&"GET"!=options.type.toUpperCase()||(options.url=appendQuery(options.url,options.data))}function parseArguments(url,data,success,dataType){var hasData=!$.isFunction(data);return{url:url,data:hasData?data:void 0,success:hasData?$.isFunction(success)?success:void 0:data,dataType:hasData?dataType||success:success}}function serialize(params,obj,traditional,scope){var type,array=$.isArray(obj);$.each(obj,function(key,value){type=$.type(value),scope&&(key=traditional?scope:scope+"["+(array?"":key)+"]"),!scope&&array?params.add(value.name,value.value):"array"==type||!traditional&&"object"==type?serialize(params,value,traditional,key):params.add(key,value)})}var key,name,jsonpID=0,document=window.document,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(options){if(!("type"in options))return $.ajax(options);var abortTimeout,callbackName="jsonp"+ ++jsonpID,script=document.createElement("script"),cleanup=function(){clearTimeout(abortTimeout),$(script).remove(),delete window[callbackName]},abort=function(type){cleanup(),type&&"timeout"!=type||(window[callbackName]=empty),ajaxError(null,type||"abort",xhr,options)},xhr={abort:abort};return ajaxBeforeSend(xhr,options)===!1?(abort("abort"),!1):(window[callbackName]=function(data){cleanup(),ajaxSuccess(data,xhr,options)},script.onerror=function(){abort("error")},script.src=options.url.replace(/=\?/,"="+callbackName),$("head").append(script),options.timeout>0&&(abortTimeout=setTimeout(function(){abort("timeout")},options.timeout)),xhr)},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(options){var settings=$.extend({},options||{});for(key in $.ajaxSettings)void 0===settings[key]&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host),settings.url||(settings.url=window.location.toString()),serializeData(settings),settings.cache===!1&&(settings.url=appendQuery(settings.url,"_="+Date.now()));var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if("jsonp"==dataType||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,"callback=?")),$.ajaxJSONP(settings);var abortTimeout,mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr();settings.crossDomain||(baseHeaders["X-Requested-With"]="XMLHttpRequest"),mime&&(baseHeaders.Accept=mime,mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime)),(settings.contentType||settings.contentType!==!1&&settings.data&&"GET"!=settings.type.toUpperCase())&&(baseHeaders["Content-Type"]=settings.contentType||"application/x-www-form-urlencoded"),settings.headers=$.extend(baseHeaders,settings.headers||{}),xhr.onreadystatechange=function(){if(4==xhr.readyState){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);
var result,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0==xhr.status&&"file:"==protocol){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type")),result=xhr.responseText;try{"script"==dataType?(1,eval)(result):"xml"==dataType?result=xhr.responseXML:"json"==dataType&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings):ajaxSuccess(result,xhr,settings)}else ajaxError(null,xhr.status?"error":"abort",xhr,settings)}};var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async);for(name in settings.headers)xhr.setRequestHeader(name,settings.headers[name]);return ajaxBeforeSend(xhr,settings)===!1?(xhr.abort(),!1):(settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr)},$.get=function(){return $.ajax(parseArguments.apply(null,arguments))},$.post=function(){var options=parseArguments.apply(null,arguments);return options.type="POST",$.ajax(options)},$.getJSON=function(){var options=parseArguments.apply(null,arguments);return options.dataType="json",$.ajax(options)},$.fn.load=function(url,data,success){if(!this.length)return this;var selector,self=this,parts=url.split(/\s/),options=parseArguments(url,data,success),callback=options.success;return parts.length>1&&(options.url=parts[0],selector=parts[1]),options.success=function(response){self.html(selector?$("<div>").html(response.replace(rscript,"")).find(selector):response),callback&&callback.apply(self,arguments)},$.ajax(options),this};var escape=encodeURIComponent;$.param=function(obj,traditional){var params=[];return params.add=function(k,v){this.push(escape(k)+"="+escape(v))},serialize(params,obj,traditional),params.join("&").replace(/%20/g,"+")}}(Zepto),function($){$.fn.serializeArray=function(){var el,result=[];return $(Array.prototype.slice.call(this.get(0).elements)).each(function(){el=$(this);var type=el.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=type&&"reset"!=type&&"button"!=type&&("radio"!=type&&"checkbox"!=type||this.checked)&&result.push({name:el.attr("name"),value:el.val()})}),result},$.fn.serialize=function(){var result=[];return this.serializeArray().forEach(function(elm){result.push(encodeURIComponent(elm.name)+"="+encodeURIComponent(elm.value))}),result.join("&")},$.fn.submit=function(callback){if(callback)this.bind("submit",callback);else if(this.length){var event=$.Event("submit");this.eq(0).trigger(event),event.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function($,undefined){function dasherize(str){return downcase(str.replace(/([a-z])([A-Z])/,"$1-$2"))}function downcase(str){return str.toLowerCase()}function normalizeEvent(name){return eventPrefix?eventPrefix+name:downcase(name)}var eventPrefix,transform,transitionProperty,transitionDuration,transitionTiming,animationName,animationDuration,animationTiming,prefix="",vendors={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},document=window.document,testEl=document.createElement("div"),supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,cssReset={};$.each(vendors,function(vendor,event){return testEl.style[vendor+"TransitionProperty"]!==undefined?(prefix="-"+downcase(vendor)+"-",eventPrefix=event,!1):void 0}),transform=prefix+"transform",cssReset[transitionProperty=prefix+"transition-property"]=cssReset[transitionDuration=prefix+"transition-duration"]=cssReset[transitionTiming=prefix+"transition-timing-function"]=cssReset[animationName=prefix+"animation-name"]=cssReset[animationDuration=prefix+"animation-duration"]=cssReset[animationTiming=prefix+"animation-timing-function"]="",$.fx={off:eventPrefix===undefined&&testEl.style.transitionProperty===undefined,speeds:{_default:400,fast:200,slow:600},cssPrefix:prefix,transitionEnd:normalizeEvent("TransitionEnd"),animationEnd:normalizeEvent("AnimationEnd")},$.fn.animate=function(properties,duration,ease,callback){return $.isPlainObject(duration)&&(ease=duration.easing,callback=duration.complete,duration=duration.duration),duration&&(duration=("number"==typeof duration?duration:$.fx.speeds[duration]||$.fx.speeds._default)/1e3),this.anim(properties,duration,ease,callback)},$.fn.anim=function(properties,duration,ease,callback){var key,cssProperties,wrappedCallback,cssValues={},transforms="",that=this,endEvent=$.fx.transitionEnd;if(duration===undefined&&(duration=.4),$.fx.off&&(duration=0),"string"==typeof properties)cssValues[animationName]=properties,cssValues[animationDuration]=duration+"s",cssValues[animationTiming]=ease||"linear",endEvent=$.fx.animationEnd;else{cssProperties=[];for(key in properties)supportedTransforms.test(key)?transforms+=key+"("+properties[key]+") ":(cssValues[key]=properties[key],cssProperties.push(dasherize(key)));transforms&&(cssValues[transform]=transforms,cssProperties.push(transform)),duration>0&&"object"==typeof properties&&(cssValues[transitionProperty]=cssProperties.join(", "),cssValues[transitionDuration]=duration+"s",cssValues[transitionTiming]=ease||"linear")}return wrappedCallback=function(event){if("undefined"!=typeof event){if(event.target!==event.currentTarget)return;$(event.target).unbind(endEvent,wrappedCallback)}$(this).css(cssReset),callback&&callback.call(this)},duration>0&&this.bind(endEvent,wrappedCallback),this.size()&&this.get(0).clientLeft,this.css(cssValues),0>=duration&&setTimeout(function(){that.each(function(){wrappedCallback.call(this)})},0),this},testEl=null}(Zepto);var gmu=gmu||{version:"@version",$:window.Zepto,staticCall:function($){var proto=$.fn,slice=[].slice,instance=$();return instance.length=1,function(item,fn){return instance[0]=item,proto[fn].apply(instance,slice.call(arguments,2))}}(Zepto)};!function(gmu,$){function eachEvent(events,callback,iterator){(events||"").split(separator).forEach(function(type){iterator(type,callback)})}function matcherFor(ns){return new RegExp("(?:^| )"+ns.replace(" "," .* ?")+"(?: |$)")}function parse(name){var parts=(""+name).split(".");return{e:parts[0],ns:parts.slice(1).sort().join(" ")}}function findHandlers(arr,name,callback,context){var matcher,obj;return obj=parse(name),obj.ns&&(matcher=matcherFor(obj.ns)),arr.filter(function(handler){return!(!handler||obj.e&&handler.e!==obj.e||obj.ns&&!matcher.test(handler.ns)||callback&&handler.cb!==callback&&handler.cb._cb!==callback||context&&handler.ctx!==context)})}function Event(type,props){return this instanceof Event?(props&&$.extend(this,props),this.type=type,this):new Event(type,props)}var slice=[].slice,separator=/\s+/,returnFalse=function(){return!1},returnTrue=function(){return!0};Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,preventDefault:function(){this.isDefaultPrevented=returnTrue},stopPropagation:function(){this.isPropagationStopped=returnTrue}},gmu.event={on:function(name,callback,context){var set,me=this;return callback?(set=this._events||(this._events=[]),eachEvent(name,callback,function(name,callback){var handler=parse(name);handler.cb=callback,handler.ctx=context,handler.ctx2=context||me,handler.id=set.length,set.push(handler)}),this):this},one:function(name,callback,context){var me=this;return callback?(eachEvent(name,callback,function(name,callback){var once=function(){return me.off(name,once),callback.apply(context||me,arguments)};once._cb=callback,me.on(name,once,context)}),this):this},off:function(name,callback,context){var events=this._events;return events?name||callback||context?(eachEvent(name,callback,function(name,callback){findHandlers(events,name,callback,context).forEach(function(handler){delete events[handler.id]})}),this):(this._events=[],this):this},trigger:function(evt){var args,events,stoped,len,ev,i=-1;if(!this._events||!evt)return this;if("string"==typeof evt&&(evt=new Event(evt)),args=slice.call(arguments,1),evt.args=args,args.unshift(evt),events=findHandlers(this._events,evt.type))for(len=events.length;++i<len;)if((stoped=evt.isPropagationStopped())||!1===(ev=events[i]).cb.apply(ev.ctx2,args)){stoped||(evt.stopPropagation(),evt.preventDefault());break}return this}},gmu.Event=Event}(gmu,gmu.$),function($){$.parseTpl=function(str,data){var tmpl="var __p=[];with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(match,code){return"',"+code.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(match,code){return"');"+code.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',func=new Function("obj",tmpl);return data?func(data):func}}(Zepto),function(gmu,$,undefined){function isPlainObject(obj){return"[object Object]"===toString.call(obj)}function eachObject(obj,iterator){obj&&Object.keys(obj).forEach(function(key){iterator(key,obj[key])})}function parseData(data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:/(?:\{[\s\S]*\}|\[[\s\S]*\])$/.test(data)?JSON.parse(data):data}catch(ex){data=undefined}return data}function getDomOptions(el){for(var key,data,ret={},attrs=el&&el.attributes,len=attrs&&attrs.length;len--;)data=attrs[len],key=data.name,"data-"===key.substring(0,5)&&(key=key.substring(5),data=parseData(data.value),data===undefined||(ret[key]=data));return ret}function zeptolize(name){var key=name.substring(0,1).toLowerCase()+name.substring(1),old=$.fn[key];$.fn[key]=function(opts){var ret,obj,args=slice.call(arguments,1),method="string"==typeof opts&&opts;return $.each(this,function(i,el){if(obj=record(el,name)||new gmu[name](el,isPlainObject(opts)?opts:undefined),"this"===method)return ret=obj,!1;if(method){if(!$.isFunction(obj[method]))throw new Error("组件没有此方法："+method);if(ret=obj[method].apply(obj,args),ret!==undefined&&ret!==obj)return!1;ret=undefined}}),ret!==undefined?ret:this},$.fn[key].noConflict=function(){return $.fn[key]=old,this}}function loadOption(klass,opts){var me=this;klass.superClass&&loadOption.call(me,klass.superClass,opts),eachObject(record(klass,"options"),function(key,option){option.forEach(function(item){var condition=item[0],fn=item[1];("*"===condition||$.isFunction(condition)&&condition.call(me,opts[key])||condition===opts[key])&&fn.call(me)})})}function loadPlugins(klass,opts){var me=this;klass.superClass&&loadPlugins.call(me,klass.superClass,opts),eachObject(record(klass,"plugins"),function(opt,plugin){opts[opt]!==!1&&(eachObject(plugin,function(key,val){var oringFn;me[key]=$.isFunction(val)&&(oringFn=me[key])?function(){var ret,origin=me.origin;return me.origin=oringFn,ret=val.apply(me,arguments),origin===undefined?delete me.origin:me.origin=origin,ret}:val}),plugin._init.call(me))})}function mergeObj(){for(var last,args=slice.call(arguments),i=args.length;i--;)last=last||args[i],isPlainObject(args[i])||args.splice(i,1);return args.length?$.extend.apply(null,[!0,{}].concat(args)):last}function bootstrap(name,klass,uid,el,options){var opts,me=this;return isPlainObject(el)&&(options=el,el=undefined),options&&options.el&&(el=$(options.el)),el&&(me.$el=$(el),el=me.$el[0]),opts=me._options=mergeObj(klass.options,getDomOptions(el),options),me.template=mergeObj(klass.template,opts.template),me.tpl2html=mergeObj(klass.tpl2html,opts.tpl2html),me.widgetName=name.toLowerCase(),me.eventNs="."+me.widgetName+uid,me._init(opts),me._options.setup=me.$el&&me.$el.parent()[0]?!0:!1,loadOption.call(me,klass,opts),loadPlugins.call(me,klass,opts),me._create(),me.trigger("ready"),el&&record(el,name,me)&&me.on("destroy",function(){record(el,name,null)}),me}function createClass(name,object,superClass){function klass(el,options){if("Base"===name)throw new Error("Base类不能直接实例化");return this instanceof klass?bootstrap.call(this,name,klass,uuid++,el,options):new klass(el,options)}"function"!=typeof superClass&&(superClass=gmu.Base);var uuid=1,suid=1;return $.extend(klass,{register:function(name,obj){var plugins=record(klass,"plugins")||record(klass,"plugins",{});return obj._init=obj._init||blankFn,plugins[name]=obj,klass},option:function(option,value,method){var options=record(klass,"options")||record(klass,"options",{});return options[option]||(options[option]=[]),options[option].push([value,method]),klass},inherits:function(obj){return createClass(name+"Sub"+suid++,obj,klass)},extend:function(obj){var proto=klass.prototype,superProto=superClass.prototype;staticlist.forEach(function(item){obj[item]=mergeObj(superClass[item],obj[item]),obj[item]&&(klass[item]=obj[item]),delete obj[item]}),eachObject(obj,function(key,val){proto[key]="function"==typeof val&&superProto[key]?function(){var ret,$super=this.$super;return this.$super=function(){var args=slice.call(arguments,1);return superProto[key].apply(this,args)},ret=val.apply(this,arguments),$super===undefined?delete this.$super:this.$super=$super,ret}:val})}}),klass.superClass=superClass,klass.prototype=Object.create(superClass.prototype),klass.extend(object),klass}var slice=[].slice,toString=Object.prototype.toString,blankFn=function(){},staticlist=["options","template","tpl2html"],record=function(){var data={},id=0,ikey="_gid";return function(obj,key,val){var dkey=obj[ikey]||(obj[ikey]=++id),store=data[dkey]||(data[dkey]={});return val!==undefined&&(store[key]=val),null===val&&delete store[key],store[key]}}(),event=gmu.event;gmu.define=function(name,object,superClass){gmu[name]=createClass(name,object,superClass),zeptolize(name)},gmu.isWidget=function(obj,klass){return klass="string"==typeof klass?gmu[klass]||blankFn:klass,klass=klass||gmu.Base,obj instanceof klass},gmu.Base=createClass("Base",{_init:blankFn,_create:blankFn,getEl:function(){return this.$el},on:event.on,one:event.one,off:event.off,trigger:function(name){var evt="string"==typeof name?new gmu.Event(name):name,args=[evt].concat(slice.call(arguments,1)),opEvent=this._options[evt.type],$el=this.getEl();return opEvent&&$.isFunction(opEvent)&&!1===opEvent.apply(this,args)&&(evt.stopPropagation(),evt.preventDefault()),event.trigger.apply(this,args),$el&&$el.triggerHandler(evt,(args.shift(),args)),this},tpl2html:function(subpart,data){var tpl=this.template;return tpl="string"==typeof subpart?tpl[subpart]:(data=subpart,tpl),data||~tpl.indexOf("<%")?$.parseTpl(tpl,data):tpl},destroy:function(){this.$el&&this.$el.off(this.eventNs),this.trigger("destroy"),this.off(),this.destroyed=!0}},Object),$.ui=gmu}(gmu,gmu.$),function($){$.extend($,{throttle:function(delay,fn,debounce_mode){function wrapper(){function exec(){last=Date.now(),fn.apply(that,args)}function clear(){timeId=void 0}var that=this,period=Date.now()-last,args=arguments;debounce_mode&&!timeId&&exec(),timeId&&clearTimeout(timeId),void 0===debounce_mode&&period>delay?exec():timeId=setTimeout(debounce_mode?clear:exec,void 0===debounce_mode?delay-period:delay)}var timeId,last=0;return"function"!=typeof fn&&(debounce_mode=fn,fn=delay,delay=250),wrapper._zid=fn._zid=fn._zid||$.proxy(fn)._zid,wrapper},debounce:function(delay,fn,t){return void 0===fn?$.throttle(250,delay,!1):$.throttle(delay,fn,void 0===t?!1:t!==!1)}})}(Zepto),function($,win){function registerScrollStop(){$(win).on("scroll",$.debounce(80,function(){$(win).trigger("scrollStop")},!1))}function backEventOffHandler(){$(win).off("scroll"),registerScrollStop()}registerScrollStop(),$(win).on("pageshow",function(e){e.persisted&&$(win).off("touchstart",backEventOffHandler).one("touchstart",backEventOffHandler)})}(Zepto,window),function($){$.matchMedia=function(){var mediaId=0,cls="gmu-media-detect",transitionEnd=$.fx.transitionEnd,cssPrefix=$.fx.cssPrefix,$style=$("<style></style>").append("."+cls+"{"+cssPrefix+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(query){var $mediaElem,ret,id=cls+mediaId++,listeners=[];return $style.append("@media "+query+" { #"+id+" { width: 1px; } }\n"),$mediaElem=$('<div class="'+cls+'" id="'+id+'"></div>').appendTo("body").on(transitionEnd,function(){ret.matches=1===$mediaElem.width(),$.each(listeners,function(i,fn){$.isFunction(fn)&&fn.call(ret,ret)})}),ret={matches:1===$mediaElem.width(),media:query,addListener:function(callback){return listeners.push(callback),this},removeListener:function(callback){var index=listeners.indexOf(callback);return~index&&listeners.splice(index,1),this}}}}()}(Zepto),$(function(){$.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},$.matchMedia($.mediaQuery.ortchange).addListener(function(){$(window).trigger("ortchange")})}),function($,undefined){$.extend($.fn,{fix:function(opts){var me=this;if(me.attr("isFixed"))return me;me.css(opts).css("position","fixed").attr("isFixed",!0);var buff=$('<div style="position:fixed;top:10px;"></div>').appendTo("body"),top=buff[0].getBoundingClientRect().top,checkFixed=function(){window.pageYOffset>0&&(buff[0].getBoundingClientRect().top!==top&&(me.css("position","absolute"),doFixed(),$(window).on("scrollStop",doFixed),$(window).on("ortchange",doFixed)),$(window).off("scrollStop",checkFixed),buff.remove())},doFixed=function(){me.css({top:window.pageYOffset+(opts.bottom!==undefined?window.innerHeight-me.height()-opts.bottom:opts.top||0),left:opts.right!==undefined?document.body.offsetWidth-me.width()-opts.right:opts.left||0}),"100%"==opts.width&&me.css("width",document.body.offsetWidth)};return $(window).on("scrollStop",checkFixed),me}})}(Zepto),function(gmu,$,undefined){gmu.define("Add2desktop",{options:{icon:"",container:"",key:"_gmu_adddesktop_key",useFix:!0,position:{bottom:12,left:"50%"},beforeshow:function(e){this.key()&&e.preventDefault()},afterhide:function(){this.key(1)},_isShow:!1},_init:function(){var me=this;me.on("ready",function(){me.$el.find(".ui-add2desktop-close").on("click",function(){me.hide()}),me._options.useFix&&me.$el.fix(me._options.position),me.show()}),me.on("destroy",function(){me.$el.remove()})},_create:function(){var $el,me=this,version=$.os.version&&$.os.version.substr(0,3)>4.1?"new":"old";if($.os.version&&$.os.version.substr(0,3)>=7&&(version="iOS7"),me._options.setup){var src=me.$el.children("img").attr("src");src&&(me._options.icon=src)}$el=me.$el||(me.$el=$("<div></div>")),$el.addClass("ui-add2desktop").appendTo(me._options.container||(me.$el.parent().length?"":document.body)),$el.html('<img src="'+me._options.icon+'"/><p>先点击<span class="ui-add2desktop-icon-'+version+'"></span>，<br />再"添加到主屏幕"</p><span class="ui-add2desktop-close"><b></b></span><div class="ui-add2desktop-arrow"><b></b></div>')},key:function(value){var ls=window.localStorage;return value!==undefined?ls.setItem(this._options.key,value):ls.getItem(this._options.key)},show:function(){var me=this;if(!me._options._isShow){if(!$.os.ios||$.browser.uc||$.browser.qq||$.browser.chrome)return me;var event=new gmu.Event("beforeshow");if(me.trigger(event),event.isDefaultPrevented())return me;me.$el.css("display","block"),me._options._isShow=!0}return me},hide:function(){var me=this;return me._options._isShow&&(me.$el.css("display","none"),me._options._isShow=!1,me.trigger("afterhide")),me}})}(gmu,gmu.$),function($){function dismiss(){var cls=$el.attr("hl-cls");clearTimeout(timer),$el.removeClass(cls).removeAttr("hl-cls"),$el=null,$doc.off("touchend touchmove touchcancel",dismiss)}var $el,timer,$doc=$(document);$.fn.highlight=function(className,selector){return this.each(function(){var $this=$(this);$this.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.hl"),className&&$this.on("touchstart.hl",function(e){var match;$el=selector?(match=$(e.target).closest(selector,this))&&match.length&&match:$this,$el&&($el.attr("hl-cls",className),timer=setTimeout(function(){$el.addClass(className)},100),$doc.on("touchend touchmove touchcancel",dismiss))})})}}(Zepto),function(gmu,$,undefined){gmu.define("Button",{options:{iconpos:"left"},template:{icon:'<span class="ui-icon ui-icon-<%= name %>"></span>',text:'<span class="ui-btn-text"><%= text %></span>'},_getWrap:function($el){return $el},_init:function(){var me=this;me.$el=me.$el===undefined?$("<span/>").appendTo(document.body):me.$el},_create:function(){var me=this,opts=me._options,$wrap=me.$wrap=me._getWrap(me.getEl()),input=$wrap.is("input"),$label=$wrap.find(".ui-btn-text"),$icon=$wrap.find(".ui-icon");opts.label=opts.label===undefined?$wrap[input?"val":"text"]():opts.label,input||opts.label===undefined||!$label.length&&($label=$(me.tpl2html("text",{text:opts.label}))).appendTo($wrap.empty()),me.$label=$label.length&&$label,opts.resetText=opts.resetText||opts.label,input||opts.icon&&!$icon.length&&($icon=$(me.tpl2html("icon",{name:opts.icon}))).appendTo($wrap),me.$icon=$icon.length&&$icon,$wrap.addClass("ui-btn "+(opts.label&&opts.icon?"ui-btn-icon-"+opts.iconpos:opts.label?"ui-btn-text-only":"ui-btn-icon-only")),opts.state&&setTimeout(function(){me.state(opts.state)},0)},state:function(state){if(state===undefined)return this._state;var me=this,$wrap=me.$wrap,input=$wrap.is("input"),text=me._options[state+"Text"];return me.$wrap.removeClass("ui-state-"+me._state).addClass("ui-state-"+state),text===undefined||(input?$wrap:me.$label)[input?"val":"text"](text),me._state!==state&&me.trigger("statechange",state,me._state),me._state=state,me},toggle:function(){return this.state("active"===this._state?"reset":"active"),this}}),$(function(){$(document.body).highlight("ui-state-hover",".ui-btn:not(.ui-state-disabled)")})}(gmu,gmu.$),function(gmu,$){var uid=0;gmu.Button.register("input",{_getWrap:function($el){var id,el,$wrap;return $el.is('input[type="checkbox"], input[type="radio"]')?(el=$el.addClass("ui-hidden")[0],(id=el.id)||(el.id=id="input_btn_"+uid++),$wrap=$("label[for="+id+"]",el.form||el.ownerDocument||void 0),$wrap.length||($wrap=$('<label for="'+id+'"></label>').insertBefore($el)),$el.prop("checked")&&(this._options.state="active"),$wrap):$el},toggle:function(){var $el=this.$el;return $el.is('input[type="radio"]')&&($radios=$("[name='"+$el.attr("name")+"']",$el[0].form||$el[0].ownerDocument||void 0),$radios.button("state","reset")),this.origin.apply(this,arguments)},state:function(state){var $el=this.$el;return $el.is('input[type="checkbox"], input[type="radio"]')&&$el.prop("disabled","disabled"===state),this.origin.apply(this,arguments)}}),$(function(){$(document.body).on("click.button","label.ui-btn:not(.ui-state-disabled)",function(){$("#"+this.getAttribute("for")).button("toggle")})})}(gmu,gmu.$),function($){function parentIfText(node){return"tagName"in node?node:node.parentNode}function swipeDirection(x1,x2,y1,y2){var xDelta=Math.abs(x1-x2),yDelta=Math.abs(y1-y2);return xDelta>=yDelta?x1-x2>0?"Left":"Right":y1-y2>0?"Up":"Down"}function longTap(){longTapTimeout=null,touch.last&&(touch.el.trigger("longTap"),touch={})}function cancelLongTap(){longTapTimeout&&clearTimeout(longTapTimeout),longTapTimeout=null}function cancelAll(){touchTimeout&&clearTimeout(touchTimeout),tapTimeout&&clearTimeout(tapTimeout),swipeTimeout&&clearTimeout(swipeTimeout),longTapTimeout&&clearTimeout(longTapTimeout),touchTimeout=tapTimeout=swipeTimeout=longTapTimeout=null,touch={}}var touchTimeout,tapTimeout,swipeTimeout,longTapTimeout,touch={},longTapDelay=750;$(document).ready(function(){var now,delta;$(document.body).bind("touchstart",function(e){now=Date.now(),delta=now-(touch.last||now),touch.el=$(parentIfText(e.touches[0].target)),touchTimeout&&clearTimeout(touchTimeout),touch.x1=e.touches[0].pageX,touch.y1=e.touches[0].pageY,delta>0&&250>=delta&&(touch.isDoubleTap=!0),touch.last=now,longTapTimeout=setTimeout(longTap,longTapDelay)}).bind("touchmove",function(e){cancelLongTap(),touch.x2=e.touches[0].pageX,touch.y2=e.touches[0].pageY,Math.abs(touch.x1-touch.x2)>10&&e.preventDefault()}).bind("touchend",function(){cancelLongTap(),touch.x2&&Math.abs(touch.x1-touch.x2)>30||touch.y2&&Math.abs(touch.y1-touch.y2)>30?swipeTimeout=setTimeout(function(){touch.el.trigger("swipe"),touch.el.trigger("swipe"+swipeDirection(touch.x1,touch.x2,touch.y1,touch.y2)),touch={}},0):"last"in touch&&(tapTimeout=setTimeout(function(){var event=$.Event("tap");event.cancelTouch=cancelAll,touch.el.trigger(event),touch.isDoubleTap?(touch.el.trigger("doubleTap"),touch={}):touchTimeout=setTimeout(function(){touchTimeout=null,touch.el.trigger("singleTap"),touch={}},250)},0))}).bind("touchcancel",cancelAll),$(window).bind("scroll",cancelAll)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(m){$.fn[m]=function(callback){return this.bind(m,callback)}})}(Zepto),function(gmu,$,undefined){var prototype,monthNames=["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],dayNames=["日","一","二","三","四","五","六"],offsetRE=/^(\+|\-)?(\d+)(M|Y)$/i,getDaysInMonth=function(year,month){return 32-new Date(year,month,32).getDate()},getFirstDayOfMonth=function(year,month){return new Date(year,month,1).getDay()},formatNumber=function(val,len){for(var num=""+val;num.length<len;)num="0"+num;return num},getVal=function(elem){return elem.is("select, input")?elem.val():elem.attr("data-value")};gmu.define("Calendar",{options:{date:null,firstDay:1,maxDate:null,minDate:null,swipeable:!1,monthChangeable:!1,yearChangeable:!1},_init:function(){this.on("ready",function(){var opts=this._options,el=this._container||this.$el,eventHandler=$.proxy(this._eventHandler,this);this.minDate(opts.minDate).maxDate(opts.maxDate).date(opts.date||new Date).refresh(),el.addClass("ui-calendar").on("click",eventHandler).highlight(),opts.swipeable&&el.on("swipeLeft swipeRight",eventHandler)})},_create:function(){var $el=this.$el;$el||($el=this.$el=$("<div>")),$el.appendTo(this._options.container||($el.parent().length?"":document.body))},_eventHandler:function(e){var match,target,cell,date,elems,root=(this._options,(this._container||this.$el).get(0));switch(e.type){case"swipeLeft":case"swipeRight":return this.switchMonthTo(("swipeRight"==e.type?"-":"+")+"1M");case"change":return elems=$(".ui-calendar-header .ui-calendar-year, .ui-calendar-header .ui-calendar-month",this._el),this.switchMonthTo(getVal(elems.eq(1)),getVal(elems.eq(0)));default:target=e.target,(match=$(target).closest(".ui-calendar-calendar tbody a",root))&&match.length?(e.preventDefault(),cell=match.parent(),this._option("selectedDate",date=new Date(cell.attr("data-year"),cell.attr("data-month"),match.text())),this.trigger("select",date,$.calendar.formatDate(date),this),this.refresh()):(match=$(target).closest(".ui-calendar-prev, .ui-calendar-next",root))&&match.length&&(e.preventDefault(),this.switchMonthTo((match.is(".ui-calendar-prev")?"-":"+")+"1M"))}},_option:function(key,val){var minDate,maxDate,opts=this._options;if(val!==undefined){switch(key){case"minDate":case"maxDate":opts[key]=val?$.calendar.parseDate(val):null;break;case"selectedDate":minDate=opts.minDate,maxDate=opts.maxDate,val=$.calendar.parseDate(val),val=minDate&&minDate>val?minDate:maxDate&&val>maxDate?maxDate:val,opts._selectedYear=opts._drawYear=val.getFullYear(),opts._selectedMonth=opts._drawMonth=val.getMonth(),opts._selectedDay=val.getDate();break;case"date":this._option("selectedDate",val),opts[key]=this._option("selectedDate");break;default:opts[key]=val}return opts._invalid=!0,this}return"selectedDate"==key?new Date(opts._selectedYear,opts._selectedMonth,opts._selectedDay):opts[key]},switchToToday:function(){var today=new Date;return this.switchMonthTo(today.getMonth(),today.getFullYear())},switchMonthTo:function(month,year){var offset,period,tmpDate,opts=this._options,minDate=this.minDate(),maxDate=this.maxDate();return"[object String]"===Object.prototype.toString.call(month)&&offsetRE.test(month)?(offset="-"==RegExp.$1?-parseInt(RegExp.$2,10):parseInt(RegExp.$2,10),period=RegExp.$3.toLowerCase(),month=opts._drawMonth+("m"==period?offset:0),year=opts._drawYear+("y"==period?offset:0)):(month=parseInt(month,10),year=parseInt(year,10)),tmpDate=new Date(year,month,1),tmpDate=minDate&&minDate>tmpDate?minDate:maxDate&&tmpDate>maxDate?maxDate:tmpDate,month=tmpDate.getMonth(),year=tmpDate.getFullYear(),(month!=opts._drawMonth||year!=opts._drawYear)&&(this.trigger("monthchange",opts._drawMonth=month,opts._drawYear=year,this),opts._invalid=!0,this.refresh()),this},refresh:function(){var opts=this._options,el=this._container||this.$el,eventHandler=$.proxy(this._eventHandler,this);if(opts._invalid)return $(".ui-calendar-calendar td:not(.ui-state-disabled), .ui-calendar-header a",el).highlight(),$(".ui-calendar-header select",el).off("change",eventHandler),el.empty().append(this._generateHTML()),$(".ui-calendar-calendar td:not(.ui-state-disabled), .ui-calendar-header a",el).highlight("ui-state-hover"),$(".ui-calendar-header select",el).on("change",eventHandler),opts._invalid=!1,this},destroy:function(){var el=this._container||this.$el,eventHandler=this._eventHandler;return $(".ui-calendar-calendar td:not(.ui-state-disabled)",el).highlight(),$(".ui-calendar-header select",el).off("change",eventHandler),el.remove(),this.$super("destroy")},_generateHTML:function(){var i,j,firstDay,day,leadDays,daysInMonth,rows,printDate,opts=this._options,drawYear=opts._drawYear,drawMonth=opts._drawMonth,tempDate=new Date,today=new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate()),minDate=this.minDate(),maxDate=this.maxDate(),selectedDate=this.selectedDate(),html="";for(firstDay=isNaN(firstDay=parseInt(opts.firstDay,10))?0:firstDay,html+=this._renderHead(opts,drawYear,drawMonth,minDate,maxDate)+'<table  class="ui-calendar-calendar"><thead><tr>',i=0;7>i;i++)day=(i+firstDay)%7,html+="<th"+((i+firstDay+6)%7>=5?' class="ui-calendar-week-end"':"")+"><span>"+dayNames[day]+"</span></th>";for(html+='</thead></tr><tbody><tr class="ui-calendar-gap"><td colspan="7">&#xa0;</td></tr>',daysInMonth=getDaysInMonth(drawYear,drawMonth),leadDays=(getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7,rows=Math.ceil((leadDays+daysInMonth)/7),printDate=new Date(drawYear,drawMonth,1-leadDays),i=0;rows>i;i++){for(html+="<tr>",j=0;7>j;j++)html+=this._renderDay(j,printDate,firstDay,drawMonth,selectedDate,today,minDate,maxDate),printDate.setDate(printDate.getDate()+1);html+="</tr>"}return html+="</tbody></table>"},_renderHead:function(data,drawYear,drawMonth,minDate,maxDate){var i,max,html='<div class="ui-calendar-header">',lpd=new Date(drawYear,drawMonth,-1),fnd=new Date(drawYear,drawMonth+1,1);if(html+='<a class="ui-calendar-prev'+(minDate&&minDate>lpd?" ui-state-disable":"")+'" href="#">&lt;&lt;</a><div class="ui-calendar-title">',data.yearChangeable){for(html+='<select class="ui-calendar-year">',i=Math.max(1970,drawYear-10),max=i+20;max>i;i++)html+='<option value="'+i+'" '+(i==drawYear?'selected="selected"':"")+">"+i+"年</option>";html+="</select>"}else html+='<span class="ui-calendar-year" data-value="'+drawYear+'">'+drawYear+"年</span>";if(data.monthChangeable){for(html+='<select class="ui-calendar-month">',i=0;12>i;i++)html+='<option value="'+i+'" '+(i==drawMonth?'selected="selected"':"")+">"+monthNames[i]+"</option>";html+="</select>"}else html+='<span class="ui-calendar-month" data-value="'+drawMonth+'">'+monthNames[drawMonth]+"</span>";return html+='</div><a class="ui-calendar-next'+(maxDate&&fnd>maxDate?" ui-state-disable":"")+'" href="#">&gt;&gt;</a></div>'},_renderDay:function(j,printDate,firstDay,drawMonth,selectedDate,today,minDate,maxDate){var unSelectable,otherMonth=printDate.getMonth()!==drawMonth;return unSelectable=otherMonth||minDate&&minDate>printDate||maxDate&&printDate>maxDate,"<td class='"+((j+firstDay+6)%7>=5?"ui-calendar-week-end":"")+(unSelectable?" ui-calendar-unSelectable ui-state-disabled":"")+(otherMonth||unSelectable?"":(printDate.getTime()===selectedDate.getTime()?" ui-calendar-current-day":"")+(printDate.getTime()===today.getTime()?" ui-calendar-today":""))+"'"+(unSelectable?"":" data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth?"&#xa0;":unSelectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===selectedDate.getTime()?" ui-state-active":"")+"' href='#'>"+printDate.getDate()+"</a>")+"</td>"
}}),prototype=gmu.Calendar.prototype,$.each(["maxDate","minDate","date","selectedDate"],function(i,name){prototype[name]=function(val){return this._option(name,val)}}),$.calendar={parseDate:function(obj){var dateRE=/^(\d{4})(?:\-|\/)(\d{1,2})(?:\-|\/)(\d{1,2})$/;return"[object Date]"===Object.prototype.toString.call(obj)?obj:dateRE.test(obj)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null},formatDate:function(date){return date.getFullYear()+"-"+formatNumber(date.getMonth()+1,2)+"-"+formatNumber(date.getDate(),2)}}}(gmu,gmu.$),function(gmu,$){function SlideUp(div,cb){var count,holder=$('<span class="ui-holder"></span>'),root=$('<div class="ui-slideup-wrap">   <div class="ui-slideup">       <div class="header">           <span class="ok-btn">确认</span>           <span class="no-btn">取消</span>       </div>       <div class="frame"></div>   </div></div>'),sDiv=$(".ui-slideup",root),frame=$(".frame",sDiv),obj={refresh:function(callback){root.css({top:window.pageYOffset+"px",height:window.innerHeight+"px"}),sDiv.animate({translateY:"-"+sDiv.height()+"px",translateZ:"0"},400,"ease-out",function(){callback&&callback.call(obj)})},close:function(callback){var count=SlideUp.count=SlideUp.count-1;return root.off("click.slideup"+id),sDiv.animate({translateY:"0",translateZ:"0"},200,"ease-out",function(){callback&&callback(),holder.replaceWith(div),root.remove(),0===count&&$(document).off("touchmove.slideup")}).find(".ok-btn, .no-btn").highlight(),obj}},id=SlideUp.id=(SlideUp.id>>>0)+1;return frame.append(div.replaceWith(holder)),count=SlideUp.count=(SlideUp.count>>>0)+1,1===count&&$(document).on("touchmove.slideup",function(e){e.preventDefault()}),root.on("click.slideup"+id,".ok-btn, .no-btn",function(){cb.call(obj,$(this).is(".ok-btn"))!==!1&&obj.close()}).appendTo(document.body).find(".ok-btn, .no-btn").highlight("ui-state-hover"),obj.refresh(),obj}gmu.Calendar.register("picker",{_create:function(){var el=this.$el;if(!el)throw new Error("请指定日期选择器的赋值对象")},_init:function(){var el=this.$el,opts=this._options;this._container=$("<div></div>"),opts.date||(opts.date=el[el.is("select, input")?"val":"text"]()),$(window).on("ortchange",$.proxy(this._eventHandler,this)),this.on("commit",function(e,date){var str=$.calendar.formatDate(date);el[el.is("select, input")?"val":"text"](str)}),this.on("destroy",function(){$(window).off("ortchange",this._eventHandler),this._frame&&this._frame.close()})},_eventHandler:function(e){"ortchange"===e.type?this._frame&&this._frame.refresh():this.origin(e)},show:function(){var el,me=this;return this._visible?this:(el=this._container,this._visible=!0,this.refresh(),this._frame=SlideUp(el,function(confirm){var date;return confirm?(date=me._option("selectedDate"),me.trigger("commit",date,$.calendar.formatDate(date),me),me._option("date",date)):me._option("selectedDate",me._option("date")),me.hide(),!1}),this.trigger("show",this))},hide:function(){var event,me=this;return this._visible?(event=new gmu.Event("beforehide"),this.trigger(event,this),event.isDefaultPrevented()?this:(this._visible=!1,this._frame.close(function(){me.trigger&&me.trigger("hide")}),this._frame=null,this)):this}})}(gmu,gmu.$),function(gmu,$,undefined){var tpl={close:'<a class="ui-dialog-close" title="关闭"><span class="ui-icon ui-icon-delete"></span></a>',mask:'<div class="ui-mask"></div>',title:'<div class="ui-dialog-title"><h3><%=title%></h3></div>',wrap:'<div class="ui-dialog"><div class="ui-dialog-content"></div><% if(btns){ %><div class="ui-dialog-btns"><% for(var i=0, length=btns.length; i<length; i++){var item = btns[i]; %><a class="ui-btn ui-btn-<%=item.index%>" data-key="<%=item.key%>"><%=item.text%></a><% } %></div><% } %></div> '};gmu.define("Dialog",{options:{autoOpen:!0,buttons:null,closeBtn:!0,mask:!0,width:300,height:"auto",title:null,content:null,scrollMove:!0,container:null,maskClick:null,position:null},getWrap:function(){return this._options._wrap},_init:function(){var btns,me=this,opts=me._options,i=0,eventHanlder=$.proxy(me._eventHandler,me),vars={};me.on("ready",function(){opts._container=$(opts.container||document.body),(opts._cIsBody=opts._container.is("body"))||opts._container.addClass("ui-dialog-container"),vars.btns=btns=[],opts.buttons&&$.each(opts.buttons,function(key){btns.push({index:++i,text:key,key:key})}),opts._mask=opts.mask?$(tpl.mask).appendTo(opts._container):null,opts._wrap=$($.parseTpl(tpl.wrap,vars)).appendTo(opts._container),opts._content=$(".ui-dialog-content",opts._wrap),opts._title=$(tpl.title),opts._close=opts.closeBtn&&$(tpl.close).highlight("ui-dialog-close-hover"),me.$el=me.$el||opts._content,me.title(opts.title),me.content(opts.content),btns.length&&$(".ui-dialog-btns .ui-btn",opts._wrap).highlight("ui-state-hover"),opts._wrap.css({width:opts.width,height:opts.height}),$(window).on("ortchange",eventHanlder),opts._wrap.on("click",eventHanlder),opts._mask&&opts._mask.on("click",eventHanlder),opts.autoOpen&&me.open()})},_create:function(){var opts=this._options;this._options.setup&&(opts.content=opts.content||this.$el.show(),opts.title=opts.title||this.$el.attr("title"))},_eventHandler:function(e){var match,wrap,fn,me=this,opts=me._options;switch(e.type){case"ortchange":this.refresh();break;case"touchmove":opts.scrollMove&&e.preventDefault();break;case"click":if(opts._mask&&($.contains(opts._mask[0],e.target)||opts._mask[0]===e.target))return me.trigger("maskClick");wrap=opts._wrap.get(0),(match=$(e.target).closest(".ui-dialog-close",wrap))&&match.length?me.close():(match=$(e.target).closest(".ui-dialog-btns .ui-btn",wrap))&&match.length&&(fn=opts.buttons[match.attr("data-key")],fn&&fn.apply(me,arguments))}},_calculate:function(){var size,$win,me=this,opts=me._options,root=document.body,ret={},isBody=opts._cIsBody,round=Math.round;return opts.mask&&(ret.mask=isBody?{width:"100%",height:Math.max(root.scrollHeight,root.clientHeight)-1}:{width:"100%",height:"100%"}),size=opts._wrap.offset(),$win=$(window),ret.wrap={left:"50%",marginLeft:-round(size.width/2)+"px",top:isBody?round($win.height()/2)+window.pageYOffset:"50%",marginTop:-round(size.height/2)+"px"},ret},refresh:function(){var ret,action,me=this,opts=me._options;return opts._isOpen&&(action=function(){ret=me._calculate(),ret.mask&&opts._mask.css(ret.mask),opts._wrap.css(ret.wrap)},$.os.ios&&document.activeElement&&/input|textarea|select/i.test(document.activeElement.tagName)?(document.body.scrollLeft=0,setTimeout(action,200)):action()),me},open:function(x,y){var opts=this._options;return opts._isOpen=!0,opts._wrap.css("display","block"),opts._mask&&opts._mask.css("display","block"),x!==undefined&&this.position?this.position(x,y):this.refresh(),$(document).on("touchmove",$.proxy(this._eventHandler,this)),this.trigger("open")},close:function(){var eventData,opts=this._options;return eventData=$.Event("beforeClose"),this.trigger(eventData),eventData.defaultPrevented?this:(opts._isOpen=!1,opts._wrap.css("display","none"),opts._mask&&opts._mask.css("display","none"),$(document).off("touchmove",this._eventHandler),this.trigger("close"))},title:function(value){var opts=this._options,setter=value!==undefined;return setter&&(value=(opts.title=value)?"<h3>"+value+"</h3>":value,opts._title.html(value)[value?"prependTo":"remove"](opts._wrap),opts._close&&opts._close.prependTo(opts.title?opts._title:opts._wrap)),setter?this:opts.title},content:function(val){var opts=this._options,setter=val!==undefined;return setter&&opts._content.empty().append(opts.content=val),setter?this:opts.content},destroy:function(){var opts=this._options,_eventHander=this._eventHandler;return $(window).off("ortchange",_eventHander),$(document).off("touchmove",_eventHander),opts._wrap.off("click",_eventHander).remove(),opts._mask&&opts._mask.off("click",_eventHander).remove(),opts._close&&opts._close.highlight(),this.$super("destroy")}})}(gmu,gmu.$),function($){function setter(coord){return this.each(function(idx){var $el=$(this),coords=$.isFunction(coord)?coord.call(this,idx,$el.offset()):coord,position=$el.css("position"),pos="absolute"===position||"fixed"===position||$el.position();"relative"===position&&(pos.top-=parseFloat($el.css("top"))||-1*parseFloat($el.css("bottom"))||0,pos.left-=parseFloat($el.css("left"))||-1*parseFloat($el.css("right"))||0),parentOffset=$el.offsetParent().offset(),props={top:round(coords.top-(pos.top||0)-parentOffset.top),left:round(coords.left-(pos.left||0)-parentOffset.left)},"static"==position&&(props.position="relative"),coords.using?coords.using.call(this,props,idx):$el.css(props)})}var _offset=$.fn.offset,round=Math.round;$.fn.offset=function(corrd){return corrd?setter.call(this,corrd):_offset.call(this)}}(Zepto),function($){function str2int(persent,totol){return(parseInt(persent,10)||0)*(rpercent.test(persent)?totol/100:1)}function getOffsets(pos,offset,width,height){return["right"===pos[0]?width:"center"===pos[0]?width/2:0,"bottom"===pos[1]?height:"center"===pos[1]?height/2:0,str2int(offset[0],width),str2int(offset[1],height)]}function getDimensions(elem){var raw=elem[0],isEvent=raw.preventDefault;return raw=raw.touches&&raw.touches[0]||raw,9===raw.nodeType||raw===window||isEvent?{width:isEvent?0:elem.width(),height:isEvent?0:elem.height(),top:raw.pageYOffset||raw.pageY||0,left:raw.pageXOffset||raw.pageX||0}:elem.offset()}function getWithinInfo(el){var $el=$(el=el||window),dim=getDimensions($el);return el=$el[0],{$el:$el,width:dim.width,height:dim.height,scrollLeft:el.pageXOffset||el.scrollLeft,scrollTop:el.pageYOffset||el.scrollTop}}function filterOpts(opts,offsets){["my","at"].forEach(function(key){var pos=(opts[key]||"").split(" "),opt=opts[key]=["center","center"],offset=offsets[key]=[0,0];1===pos.length&&pos[rvertical.test(pos[0])?"unshift":"push"]("center"),rhorizontal.test(pos[0])&&(opt[0]=RegExp.$1)&&(offset[0]=RegExp.$2),rvertical.test(pos[1])&&(opt[1]=RegExp.$1)&&(offset[1]=RegExp.$2)})}var _position=$.fn.position,round=Math.round,rhorizontal=/^(left|center|right)([\+\-]\d+%?)?$/,rvertical=/^(top|center|bottom)([\+\-]\d+%?)?$/,rpercent=/%$/;$.fn.position=function(opts){if(!opts||!opts.of)return _position.call(this);opts=$.extend({},opts);var atOfs,target=$(opts.of),collision=opts.collision,within=collision&&getWithinInfo(opts.within),ofses={},dim=getDimensions(target),bPos={left:dim.left,top:dim.top};return target[0].preventDefault&&(opts.at="left top"),filterOpts(opts,ofses),atOfs=getOffsets(opts.at,ofses.at,dim.width,dim.height),bPos.left+=atOfs[0]+atOfs[2],bPos.top+=atOfs[1]+atOfs[3],this.each(function(){var $el=$(this),ofs=$el.offset(),pos=$.extend({},bPos),myOfs=getOffsets(opts.my,ofses.my,ofs.width,ofs.height);pos.left=round(pos.left+myOfs[2]-myOfs[0]),pos.top=round(pos.top+myOfs[3]-myOfs[1]),collision&&collision.call(this,pos,{of:dim,offset:ofs,my:opts.my,at:opts.at,within:within,$el:$el}),pos.using=opts.using,$el.offset(pos)})}}(Zepto),function(gmu,$){gmu.Dialog.register("position",{_init:function(){var opts=this._options;opts.position=opts.position||{of:opts.container||window,at:"center",my:"center"}},position:function(x,y){var opts=this._options;return $.isPlainObject(x)?$.extend(opts.position,x):opts.position.at="left"+(x>0?"+"+x:x)+" top"+(y>0?"+"+y:y),this.refresh()},_calculate:function(){var me=this,opts=me._options,position=opts.position,ret=me.origin();return opts._wrap.position($.extend(position,{using:function(position){ret.wrap=position}})),ret}})}(gmu,gmu.$),function(gmu,$,undefined){gmu.define("Popover",{options:{container:null,content:null,event:"click"},template:{frame:"<div>"},_create:function(){var me=this,opts=me._options,$el=opts.target&&$(opts.target)||me.getEl(),$root=opts.container&&$(opts.container);$root&&$root.length||($root=$(me.tpl2html("frame")).addClass("ui-mark-temp")),me.$root=$root,opts.content&&me.setContent(opts.content),me.trigger("done.dom",$root.addClass("ui-"+me.widgetName),opts),$root.parent().length||$el.after($root),me.target($el)},_checkTemp:function($el){$el.is(".ui-mark-temp")&&$el.off(this.eventNs)&&$el.remove()},show:function(){var me=this,evt=gmu.Event("beforeshow");return me.trigger(evt),evt.isDefaultPrevented()?void 0:(me.trigger("placement",me.$root.addClass("ui-in"),me.$target),me._visible=!0,me.trigger("show"))},hide:function(){var me=this,evt=new gmu.Event("beforehide");return me.trigger(evt),evt.isDefaultPrevented()?void 0:(me.$root.removeClass("ui-in"),me._visible=!1,me.trigger("hide"))},toggle:function(){var me=this;return me[me._visible?"hide":"show"].apply(me,arguments)},target:function(el){if(el===undefined)return this.$target;var me=this,$el=$(el),orig=me.$target,click=me._options.event+me.eventNs;return orig&&orig.off(click),me.$target=$el.on(click,function(e){e.preventDefault(),me.toggle()}),me},setContent:function(val){var container=this.$root;return container.empty().append(val),this},destroy:function(){var me=this;return me.$target.off(me.eventNs),me._checkTemp(me.$root),me.$super("destroy")}})}(gmu,gmu.$),function(gmu,$){gmu.define("Dropmenu",{options:{content:null},template:{item:'<li><a <% if ( href ) { %>href="<%= href %>"<% } %>><% if ( icon ) { %><span class="ui-icon ui-icon-<%= icon %>"></span><% } %><%= text %></a></li>',divider:'<li class="divider"></li>',wrap:"<ul>"},_init:function(){var me=this;me.on("done.dom",function(e,$root){me.$list=$root.find("ul").first().addClass("ui-dropmenu-items").highlight("ui-state-hover",".ui-dropmenu-items>li:not(.divider)")})},_create:function(){var me=this,opts=me._options,content="";"array"===$.type(opts.content)&&(opts.content.forEach(function(item){item=$.extend({href:"",icon:"",text:""},"string"==typeof item?{text:item}:item),content+=me.tpl2html("divider"===item.text?"divider":"item",item)}),opts.content=$(me.tpl2html("wrap")).append(content)),me.$super("_create"),me.$list.on("click"+me.eventNs,".ui-dropmenu-items>li:not(.ui-state-disable):not(.divider)",function(e){var evt=gmu.Event("itemclick",e);me.trigger(evt,this),evt.isDefaultPrevented()||me.hide()})}},gmu.Popover)}(gmu,gmu.$),function(gmu){gmu.Dropmenu.options.horizontal=!0,gmu.Dropmenu.option("horizontal",!0,function(){var me=this;me.on("done.dom",function(e,$root){$root.addClass("ui-horizontal")})})}(gmu,gmu.$),function(gmu,$){$.extend(gmu.Dropmenu.options,{placement:"bottom",align:"center",offset:null}),gmu.Dropmenu.option("placement",function(val){return~["top","bottom"].indexOf(val)},function(){function getPos(pos,len){return"right"===pos||"bottom"===pos?len:"center"===pos?len/2:0}function placement(preset,atH,atV,myH,myV){var of=info.of,coord=info.coord,offset=info.offset,top=of.top,left=of.left;return left+=getPos(atH,of.width)-getPos(myH,coord.width),top+=getPos(atV,of.height)-getPos(myV,coord.height),offset="function"==typeof offset?offset.call(null,{left:left,top:top},preset):offset||{},{left:left+(offset.left||0),top:top+(offset.top||0)}}var info,config={top_center:"center top center bottom",top_left:"left top left bottom",top_right:"right top right bottom",bottom_center:"center bottom center top",bottom_right:"right bottom right top",bottom_left:"left bottom left top"},presets={};$.each(config,function(preset,args){args=args.split(/\s/g),args.unshift(preset),presets[preset]=function(){return placement.apply(null,args)}}),this.on("placement",function(e,$el,$of){var coord,me=this,opts=me._options,placement=opts.placement,align=opts.align;info={coord:$el.offset(),of:$of.offset(),placement:placement,align:align,$el:$el,$of:$of,offset:opts.offset},coord=presets[placement+"_"+align](),me.trigger("before.placement",coord,info,presets),/^(\w+)_(\w+)$/.test(info.preset)&&(info.placement=RegExp.$1,info.align=RegExp.$2),$el.offset(coord),me.trigger("after.placement",coord,info)})})}(gmu,gmu.$),function(gmu,$,undefined){gmu.define("Gotop",{options:{container:"",useFix:!0,useHide:!0,useAnimation:!1,position:{bottom:10,right:10},afterScroll:null},_init:function(){var $el,_eventHandler,me=this,_opts=me._options;$.os.version&&$.os.version.substr(0,3)>=7&&(_opts.position.bottom=40),me.on("ready",function(){$el=me.$el,_eventHandler=$.proxy(me._eventHandler,me),_opts.useHide&&$(document).on("touchmove",_eventHandler),$(window).on("touchend touchcancel scrollStop",_eventHandler),$(window).on("scroll ortchange",_eventHandler),$el.on("click",_eventHandler),me.on("destroy",function(){$(window).off("touchend touchcancel scrollStop",_eventHandler),$(document).off("touchmove",_eventHandler),$(window).off("scroll ortchange",_eventHandler)}),_opts.useFix&&$el.fix(_opts.position),_opts.root=$el[0]}),me.on("destroy",function(){me.$el.remove()})},_create:function(){var me=this;return me.$el||(me.$el=$("<div></div>")),me.$el.addClass("ui-gotop").append("<div></div>").appendTo(me._options.container||(me.$el.parent().length?"":document.body)),me},_eventHandler:function(e){var me=this;switch(e.type){case"touchmove":me.hide();break;case"scroll":clearTimeout(me._options._TID);break;case"touchend":case"touchcancel":clearTimeout(me._options._TID),me._options._TID=setTimeout(function(){me._check.call(me)},300);break;case"scrollStop":me._check();break;case"ortchange":me._check.call(me);break;case"click":me._scrollTo()}},_check:function(position){var me=this;return(position!==undefined?position:window.pageYOffset)>document.documentElement.clientHeight?me.show():me.hide(),me},_scrollTo:function(){var me=this,from=window.pageYOffset;return me.hide(),clearTimeout(me._options._TID),me._options.useAnimation?me._options.moveToTop=setInterval(function(){from>1?(window.scrollBy(0,-Math.min(150,from-1)),from-=150):(clearInterval(me._options.moveToTop),me.trigger("afterScroll"))},25,!0):(window.scrollTo(0,1),me.trigger("afterScroll")),me},show:function(){return this._options.root.style.display="block",this},hide:function(){return this._options.root.style.display="none",this}})}(gmu,gmu.$),function(gmu,$){gmu.define("Historylist",{options:{container:document.body,deleteSupport:!0,items:[]},template:{wrap:'<ul class="ui-historylist">',item:'<li data-id="<%=id%>"><p class="ui-historylist-itemwrap"><span class="ui-historylist-item"><%=context%></span></p></li>',clear:'<p class="ui-historylist-clear">清空搜索历史</p>'},_init:function(){var me=this,opts=me._options;me.$el=opts.container=opts.container||document.body,me.items=[],me.on("ready",function(){me._bindUI()}),me.on("itemDelete",function(){0===me.items.length&&me.hide()})},_create:function(){var me=this,opts=me._options;me.$el.hide(),me.$wrap=$(me.tpl2html("wrap")).appendTo(opts.container),me.$clear=$(me.tpl2html("clear")).appendTo(opts.container),!me._options.deleteSupport&&me.$clear.hide(),me.addItems(opts.items),me.show()},_filterItemsById:function(id,callback){var me=this;me.items.forEach(function(_item,index){return _item.id===id?void callback.call(me,_item,index):void 0})},_bindUI:function(){var touch,$target,itemId,startTimestamp,endTimestamp,timeout,touchstartX,currentX,touchstartY,currentY,velocity,movedPercentage,moved,movedDistance,me=this,wantDelete=!1;me.$clear.on("tap"+me.eventNs,function(ev){setTimeout(function(){gmu.Dialog({closeBtn:!1,buttons:{"清空":function(){me.clear(),this.destroy()},"取消":function(){this.destroy()}},title:"清空历史",content:"<p>是否清空搜索历史？</p>",open:function(){this._options._wrap.addClass("ui-historylist-dialog")}})},10),ev.preventDefault(),ev.stopPropagation()}),me.$wrap.on("tap"+me.eventNs,function(ev){if(!me._options.deleteSupport){if($target=$(ev.target),!$target.hasClass("ui-historylist-itemwrap")&&!($target=$target.parents(".ui-historylist-itemwrap")).length)return void($target=null);itemId=$target.parent().attr("data-id"),me._filterItemsById(itemId,function(_item){me.trigger("itemTouch",{item:_item.value})})}}),me.$wrap.on("touchstart"+me.eventNs,function(ev){if(me._options.deleteSupport){if(touch=ev.touches[0],$target=$(touch.target),startTimestamp=ev.timeStamp,currentX=touchstartX=parseInt(touch.pageX),currentY=touchstartY=parseInt(touch.pageY),moved=!1,wantDelete=!1,!$target.hasClass("ui-historylist-itemwrap")&&!($target=$target.parents(".ui-historylist-itemwrap")).length)return void($target=null);$target.addClass("ui-historylist-ontap"),$target.css("width",$target.width()-parseInt($target.css("border-left-width"))-parseInt($target.css("border-right-width")))}}),me.$wrap.on("touchmove"+me.eventNs,function(ev){if($target){if(currentX=ev.touches[0].pageX,currentY=ev.touches[0].pageY,void 0===timeout&&(timeout=setTimeout(function(){wantDelete=Math.abs(currentY-touchstartY)>Math.abs(currentX-touchstartX)/2?!1:!0},10)),moved=moved||(currentX-touchstartX>=3||currentY-touchstartY>=3?!0:!1),!wantDelete)return void setTimeout(function(){$target&&$target.removeClass("ui-historylist-ontap")},150);movedPercentage=(currentX-touchstartX)/me.$wrap.width(),$target.addClass("ui-historylist-itemmoving"),$target.removeClass("ui-historylist-ontap"),$target.css("-webkit-transform","translate3d("+(currentX-touchstartX)+"px, 0, 0)"),$target.css("opacity",1-movedPercentage),ev.preventDefault(),ev.stopPropagation()}}),me.$wrap.on("touchend"+me.eventNs+" touchcancel"+me.eventNs,function(ev){$target&&(clearTimeout(timeout),timeout=void 0,itemId=$target.parent().attr("data-id"),endTimestamp=ev.timeStamp,velocity=(currentX-touchstartX)/(endTimestamp-startTimestamp),movedDistance=Math.abs(currentX-touchstartX),$target.removeClass("ui-historylist-ontap"),$target.removeClass("ui-historylist-itemmoving"),movedDistance<me.$wrap.width()/3&&Math.abs(velocity)>.1&&wantDelete||movedDistance>=me.$wrap.width()/3&&wantDelete?me.removeItem(itemId,$target):($target.css("width","auto"),$target.css("-webkit-transform","translate3d(0, 0, 0)"),$target.css("opacity",1),!moved&&3>movedDistance&&me._filterItemsById(itemId,function(_item){me.trigger("itemTouch",{item:_item.value})})),$target=null)})},show:function(){var me=this;if(0!==me.items.length)return me.sync===!1&&(me.$wrap.html(""),me.addItems(me.syncitems),me.sync=!0),me.$el.show(),me.isShow=!0,me},hide:function(){var me=this;return me.$el.hide(),me.isShow=!1,me},_getItemId:function(){var me=this;return void 0===me._itemId?me._itemId=1:++me._itemId,"__dd__"+me._itemId},_getFormatItem:function(item){var me=this;return"[object String]"===Object.prototype.toString.call(item)?{context:item,value:item,id:me._getItemId()}:{context:item.context||item.value,value:item.value||item.context,id:me._getItemId()}},addItem:function(item){var me=this,item=me._getFormatItem(item);return me.items.forEach(function(_item,index){return _item.value===item.value?(me.items.splice(index,1),void $(me.$wrap.children()[index]).remove()):void 0}),0===me.$wrap.children().length?me.$wrap.append(me.tpl2html("item",item)):$(me.tpl2html("item",item)).insertBefore(me.$wrap.children()[0]),me.items.unshift(item),me},addItems:function(items){var me=this;return items.forEach(function(item){me.addItem(item)}),me},update:function(items){var me=this;return me.isShow?(me.$wrap.html(""),me.addItems(items),me.sync=!0):(me.syncitems=items,me.sync=!1),me},removeItem:function(itemId,$itemTarget){var distance,transform,x,me=this;transform=$itemTarget.css("-webkit-transform"),x=/translate3d\((.*?),.*/.test(transform)?RegExp.$1:0,distance=parseInt(x,10)>=0?$itemTarget.width():-$itemTarget.width(),$itemTarget.css("-webkit-transform","translate3d("+distance+"px, 0, 0)"),$itemTarget.on("transitionEnd"+me.eventNs+" webkitTransitionEnd"+me.eventNs,function(){$itemTarget.parent().remove(),me._filterItemsById(itemId,function(_item,index){me.items.splice(index,1),me.trigger("itemDelete",{item:_item.value})})})},clear:function(){var me=this;return me.$wrap.html(""),me.items=[],me.sync=!0,me.hide(),me.trigger("clear"),me},disableDelete:function(){var me=this;return me._options.deleteSupport=!1,me.$clear.hide(),me},enableDelete:function(){var me=this;return me._options.deleteSupport=!0,me.$clear.show(),me},destroy:function(){var me=this;return me.$wrap.off(me.eventNs),me.$clear.off(me.eventNs),me.$wrap.remove(),me.$clear.remove(),me.$super("destroy")}})}(gmu,gmu.$),function(gmu,$,undefined){gmu.define("Navigator",{options:{content:null,event:"click"},template:{list:"<ul>",item:'<li><a<% if( href ) { %> href="<%= href %>"<% } %>><%= text %></a></li>'},_create:function(){var renderer,html,me=this,opts=me._options,$el=me.getEl(),$list=$el.find("ul").first(),name="ui-"+me.widgetName;!$list.length&&opts.content?($list=$(me.tpl2html("list")),renderer=me.tpl2html("item"),html="",opts.content.forEach(function(item){item=$.extend({href:"",text:""},"string"==typeof item?{text:item}:item),html+=renderer(item)}),$list.append(html).appendTo($el)):($el.is("ul, ol")&&($list=$el.wrap("<div>"),$el=$el.parent()),opts.index===undefined&&(opts.index=$list.find(".ui-state-active").index(),~opts.index||(opts.index=0))),me.$list=$list.addClass(name+"-list"),me.trigger("done.dom",$el.addClass(name),opts),$list.highlight("ui-state-hover","li"),$list.on(opts.event+me.eventNs,"li:not(.ui-state-disable)>a",function(e){me._switchTo($(this).parent().index(),e)}),me.index=-1,me.switchTo(opts.index)},_switchTo:function(to,e){if(to!==this.index){var cur,me=this,list=me.$list.children(),evt=gmu.Event("beforeselect",e);if(me.trigger(evt,list.get(to)),!evt.isDefaultPrevented())return cur=list.removeClass("ui-state-active").eq(to).addClass("ui-state-active"),me.index=to,me.trigger("select",to,cur[0])}},switchTo:function(to){return this._switchTo(~~to)},unselect:function(){this.index=-1,this.$list.children().removeClass("ui-state-active")},getIndex:function(){return this.index}})}(gmu,gmu.$),function(window,doc){function prefixStyle(style){return""===vendor?style:(style=style.charAt(0).toUpperCase()+style.substr(1),vendor+style)}var m=Math,_bindArr=[],dummyStyle=doc.createElement("div").style,vendor=function(){for(var t,vendors="webkitT,MozT,msT,OT,t".split(","),i=0,l=vendors.length;l>i;i++)if(t=vendors[i]+"ransform",t in dummyStyle)return vendors[i].substr(0,vendors[i].length-1);return!1}(),cssVendor=vendor?"-"+vendor.toLowerCase()+"-":"",transform=prefixStyle("transform"),transitionProperty=prefixStyle("transitionProperty"),transitionDuration=prefixStyle("transitionDuration"),transformOrigin=prefixStyle("transformOrigin"),transitionTimingFunction=prefixStyle("transitionTimingFunction"),isAndroid=(prefixStyle("transitionDelay"),/android/gi.test(navigator.appVersion)),isTouchPad=/hp-tablet/gi.test(navigator.appVersion),has3d=prefixStyle("perspective")in dummyStyle,hasTouch="ontouchstart"in window&&!isTouchPad,hasTransform=!!vendor,hasTransitionEnd=prefixStyle("transition")in dummyStyle,RESIZE_EV="onorientationchange"in window?"orientationchange":"resize",START_EV=hasTouch?"touchstart":"mousedown",MOVE_EV=hasTouch?"touchmove":"mousemove",END_EV=hasTouch?"touchend":"mouseup",CANCEL_EV=hasTouch?"touchcancel":"mouseup",TRNEND_EV=function(){if(vendor===!1)return!1;var transitionEnd={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return transitionEnd[vendor]}(),nextFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return setTimeout(callback,1)}}(),cancelFrame=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),translateZ=has3d?" translateZ(0)":"",iScroll=function(el,options){var i,that=this;that.wrapper="object"==typeof el?el:doc.getElementById(el),that.wrapper.style.overflow="hidden",that.scroller=that.wrapper.children[0],that.translateZ=translateZ,that.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in options)that.options[i]=options[i];that.x=that.options.x,that.y=that.options.y,that.options.useTransform=hasTransform&&that.options.useTransform,that.options.useTransition=hasTransitionEnd&&that.options.useTransition,that.scroller.style[transitionProperty]=that.options.useTransform?cssVendor+"transform":"top left",that.scroller.style[transitionDuration]="0",that.scroller.style[transformOrigin]="0 0",that.options.useTransition&&(that.scroller.style[transitionTimingFunction]="cubic-bezier(0.33,0.66,0.66,1)"),that.options.useTransform?that.scroller.style[transform]="translate("+that.x+"px,"+that.y+"px)"+translateZ:that.scroller.style.cssText+=";position:absolute;top:"+that.y+"px;left:"+that.x+"px",that.refresh(),that._bind(RESIZE_EV,window),that._bind(START_EV),that.options.checkDOMChanges&&(that.checkDOMTime=setInterval(function(){that._checkDOMChanges()},500))};iScroll.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,isStopScrollAction:!1,handleEvent:function(e){var that=this;switch(e.type){case START_EV:if(!hasTouch&&0!==e.button)return;that._start(e);break;case MOVE_EV:that._move(e);break;case END_EV:case CANCEL_EV:that._end(e);break;case RESIZE_EV:that._resize();break;case TRNEND_EV:that._transitionEnd(e)}},_checkDOMChanges:function(){this.moved||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_resize:function(){var that=this;setTimeout(function(){that.refresh()},isAndroid?200:0)},_pos:function(x,y){x=this.hScroll?x:0,y=this.vScroll?y:0,this.options.useTransform?this.scroller.style[transform]="translate("+x+"px,"+y+"px) scale("+this.scale+")"+translateZ:(x=m.round(x),y=m.round(y),this.scroller.style.left=x+"px",this.scroller.style.top=y+"px"),this.x=x,this.y=y},_start:function(e){var matrix,x,y,that=this,point=hasTouch?e.touches[0]:e;that.enabled&&(that.options.onBeforeScrollStart&&that.options.onBeforeScrollStart.call(that,e),that.options.useTransition&&that._transitionTime(0),that.moved=!1,that.animating=!1,that.distX=0,that.distY=0,that.absDistX=0,that.absDistY=0,that.dirX=0,that.dirY=0,that.isStopScrollAction=!1,that.options.momentum&&(that.options.useTransform?(matrix=getComputedStyle(that.scroller,null)[transform].replace(/[^0-9\-.,]/g,"").split(","),x=+matrix[4],y=+matrix[5]):(x=+getComputedStyle(that.scroller,null).left.replace(/[^0-9-]/g,""),y=+getComputedStyle(that.scroller,null).top.replace(/[^0-9-]/g,"")),(m.round(x)!=m.round(that.x)||m.round(y)!=m.round(that.y))&&(that.isStopScrollAction=!0,that.options.useTransition?that._unbind(TRNEND_EV):cancelFrame(that.aniTime),that.steps=[],that._pos(x,y),that.options.onScrollEnd&&that.options.onScrollEnd.call(that))),that.startX=that.x,that.startY=that.y,that.pointX=point.pageX,that.pointY=point.pageY,that.startTime=e.timeStamp||Date.now(),that.options.onScrollStart&&that.options.onScrollStart.call(that,e),that._bind(MOVE_EV,window),that._bind(END_EV,window),that._bind(CANCEL_EV,window))},_move:function(e){var that=this,point=hasTouch?e.touches[0]:e,deltaX=point.pageX-that.pointX,deltaY=point.pageY-that.pointY,newX=that.x+deltaX,newY=that.y+deltaY,timestamp=e.timeStamp||Date.now();that.options.onBeforeScrollMove&&that.options.onBeforeScrollMove.call(that,e),that.pointX=point.pageX,that.pointY=point.pageY,(newX>0||newX<that.maxScrollX)&&(newX=that.options.bounce?that.x+deltaX/2:newX>=0||that.maxScrollX>=0?0:that.maxScrollX),(newY>that.minScrollY||newY<that.maxScrollY)&&(newY=that.options.bounce?that.y+deltaY/2:newY>=that.minScrollY||that.maxScrollY>=0?that.minScrollY:that.maxScrollY),that.distX+=deltaX,that.distY+=deltaY,that.absDistX=m.abs(that.distX),that.absDistY=m.abs(that.distY),that.absDistX<6&&that.absDistY<6||(that.options.lockDirection&&(that.absDistX>that.absDistY+5?(newY=that.y,deltaY=0):that.absDistY>that.absDistX+5&&(newX=that.x,deltaX=0)),that.moved=!0,that._beforePos?that._beforePos(newY,deltaY)&&that._pos(newX,newY):that._pos(newX,newY),that.dirX=deltaX>0?-1:0>deltaX?1:0,that.dirY=deltaY>0?-1:0>deltaY?1:0,timestamp-that.startTime>300&&(that.startTime=timestamp,that.startX=that.x,that.startY=that.y),that.options.onScrollMove&&that.options.onScrollMove.call(that,e))
},_end:function(e){if(!hasTouch||0===e.touches.length){var target,ev,newDuration,that=this,point=hasTouch?e.changedTouches[0]:e,momentumX={dist:0,time:0},momentumY={dist:0,time:0},duration=(e.timeStamp||Date.now())-that.startTime,newPosX=that.x,newPosY=that.y;if(that._unbind(MOVE_EV,window),that._unbind(END_EV,window),that._unbind(CANCEL_EV,window),that.options.onBeforeScrollEnd&&that.options.onBeforeScrollEnd.call(that,e),!that.moved)return hasTouch&&this.options.handleClick&&!that.isStopScrollAction&&(that.doubleTapTimer=setTimeout(function(){for(that.doubleTapTimer=null,target=point.target;1!=target.nodeType;)target=target.parentNode;"SELECT"!=target.tagName&&"INPUT"!=target.tagName&&"TEXTAREA"!=target.tagName&&(ev=doc.createEvent("MouseEvents"),ev.initMouseEvent("click",!0,!0,e.view,1,point.screenX,point.screenY,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),ev._fake=!0,target.dispatchEvent(ev))},0)),that._resetPos(400),void(that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e));if(300>duration&&that.options.momentum&&(momentumX=newPosX?that._momentum(newPosX-that.startX,duration,-that.x,that.scrollerW-that.wrapperW+that.x,that.options.bounce?that.wrapperW:0):momentumX,momentumY=newPosY?that._momentum(newPosY-that.startY,duration,-that.y,that.maxScrollY<0?that.scrollerH-that.wrapperH+that.y-that.minScrollY:0,that.options.bounce?that.wrapperH:0):momentumY,newPosX=that.x+momentumX.dist,newPosY=that.y+momentumY.dist,(that.x>0&&newPosX>0||that.x<that.maxScrollX&&newPosX<that.maxScrollX)&&(momentumX={dist:0,time:0}),(that.y>that.minScrollY&&newPosY>that.minScrollY||that.y<that.maxScrollY&&newPosY<that.maxScrollY)&&(momentumY={dist:0,time:0})),momentumX.dist||momentumY.dist)return newDuration=m.max(m.max(momentumX.time,momentumY.time),10),that.scrollTo(m.round(newPosX),m.round(newPosY),newDuration),void(that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e));that._resetPos(200),that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e)}},_resetPos:function(time){var that=this,resetX=that.x>=0?0:that.x<that.maxScrollX?that.maxScrollX:that.x,resetY=that.y>=that.minScrollY||that.maxScrollY>0?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;return resetX==that.x&&resetY==that.y?void(that.moved&&(that.moved=!1,that.options.onScrollEnd&&that.options.onScrollEnd.call(that),that._afterPos&&that._afterPos())):void that.scrollTo(resetX,resetY,time||0)},_transitionEnd:function(e){var that=this;e.target==that.scroller&&(that._unbind(TRNEND_EV),that._startAni())},_startAni:function(){var step,easeOut,animate,that=this,startX=that.x,startY=that.y,startTime=Date.now();if(!that.animating){if(!that.steps.length)return void that._resetPos(400);if(step=that.steps.shift(),step.x==startX&&step.y==startY&&(step.time=0),that.animating=!0,that.moved=!0,that.options.useTransition)return that._transitionTime(step.time),that._pos(step.x,step.y),that.animating=!1,void(step.time?that._bind(TRNEND_EV):that._resetPos(0));animate=function(){var newX,newY,now=Date.now();return now>=startTime+step.time?(that._pos(step.x,step.y),that.animating=!1,that.options.onAnimationEnd&&that.options.onAnimationEnd.call(that),void that._startAni()):(now=(now-startTime)/step.time-1,easeOut=m.sqrt(1-now*now),newX=(step.x-startX)*easeOut+startX,newY=(step.y-startY)*easeOut+startY,that._pos(newX,newY),void(that.animating&&(that.aniTime=nextFrame(animate))))},animate()}},_transitionTime:function(time){time+="ms",this.scroller.style[transitionDuration]=time},_momentum:function(dist,time,maxDistUpper,maxDistLower,size){var deceleration=6e-4,speed=m.abs(dist)*(this.options.speedScale||1)/time,newDist=speed*speed/(2*deceleration),newTime=0,outsideDist=0;return dist>0&&newDist>maxDistUpper?(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistUpper+=outsideDist,speed=speed*maxDistUpper/newDist,newDist=maxDistUpper):0>dist&&newDist>maxDistLower&&(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistLower+=outsideDist,speed=speed*maxDistLower/newDist,newDist=maxDistLower),newDist*=0>dist?-1:1,newTime=speed/deceleration,{dist:newDist,time:m.round(newTime)}},_offset:function(el){for(var left=-el.offsetLeft,top=-el.offsetTop;el=el.offsetParent;)left-=el.offsetLeft,top-=el.offsetTop;return el!=this.wrapper&&(left*=this.scale,top*=this.scale),{left:left,top:top}},_bind:function(type,el,bubble){_bindArr.concat([el||this.scroller,type,this]),(el||this.scroller).addEventListener(type,this,!!bubble)},_unbind:function(type,el,bubble){(el||this.scroller).removeEventListener(type,this,!!bubble)},destroy:function(){var that=this;that.scroller.style[transform]="",that._unbind(RESIZE_EV,window),that._unbind(START_EV),that._unbind(MOVE_EV,window),that._unbind(END_EV,window),that._unbind(CANCEL_EV,window),that.options.useTransition&&that._unbind(TRNEND_EV),that.options.checkDOMChanges&&clearInterval(that.checkDOMTime),that.options.onDestroy&&that.options.onDestroy.call(that);for(var i=0,l=_bindArr.length;l>i;)_bindArr[i].removeEventListener(_bindArr[i+1],_bindArr[i+2]),_bindArr[i]=null,i+=3;_bindArr=[]},refresh:function(){var offset,that=this;that.wrapperW=that.wrapper.clientWidth||1,that.wrapperH=that.wrapper.clientHeight||1,that.minScrollY=-that.options.topOffset||0,that.scrollerW=m.round(that.scroller.offsetWidth*that.scale),that.scrollerH=m.round((that.scroller.offsetHeight+that.minScrollY)*that.scale),that.maxScrollX=that.wrapperW-that.scrollerW,that.maxScrollY=that.wrapperH-that.scrollerH+that.minScrollY,that.dirX=0,that.dirY=0,that.options.onRefresh&&that.options.onRefresh.call(that),that.hScroll=that.options.hScroll&&that.maxScrollX<0,that.vScroll=that.options.vScroll&&(!that.options.bounceLock&&!that.hScroll||that.scrollerH>that.wrapperH),offset=that._offset(that.wrapper),that.wrapperOffsetLeft=-offset.left,that.wrapperOffsetTop=-offset.top,that.scroller.style[transitionDuration]="0",that._resetPos(400)},scrollTo:function(x,y,time,relative){var i,l,that=this,step=x;for(that.stop(),step.length||(step=[{x:x,y:y,time:time,relative:relative}]),i=0,l=step.length;l>i;i++)step[i].relative&&(step[i].x=that.x-step[i].x,step[i].y=that.y-step[i].y),that.steps.push({x:step[i].x,y:step[i].y,time:step[i].time||0});that._startAni()},scrollToElement:function(el,time){var pos,that=this;el=el.nodeType?el:that.scroller.querySelector(el),el&&(pos=that._offset(el),pos.left+=that.wrapperOffsetLeft,pos.top+=that.wrapperOffsetTop,pos.left=pos.left>0?0:pos.left<that.maxScrollX?that.maxScrollX:pos.left,pos.top=pos.top>that.minScrollY?that.minScrollY:pos.top<that.maxScrollY?that.maxScrollY:pos.top,time=void 0===time?m.max(2*m.abs(pos.left),2*m.abs(pos.top)):time,that.scrollTo(pos.left,pos.top,time))},scrollToPage:function(pageX,pageY,time){var x,y,that=this;time=void 0===time?400:time,that.options.onScrollStart&&that.options.onScrollStart.call(that),x=-that.wrapperW*pageX,y=-that.wrapperH*pageY,x<that.maxScrollX&&(x=that.maxScrollX),y<that.maxScrollY&&(y=that.maxScrollY),that.scrollTo(x,y,time)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(MOVE_EV,window),this._unbind(END_EV,window),this._unbind(CANCEL_EV,window)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(TRNEND_EV):cancelFrame(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},isReady:function(){return!this.moved&&!this.animating}},dummyStyle=null,"undefined"!=typeof exports?exports.iScroll=iScroll:window.iScroll=iScroll,function($,ns,undefined){if($){var iScroll,_iScroll=ns.iScroll,slice=[].slice,record=function(){var data={},id=0,ikey="_sid";return function(obj,val){var key=obj[ikey]||(obj[ikey]=++id);return val!==undefined&&(data[key]=val),null===val&&delete data[key],data[key]}}();ns.iScroll=iScroll=function(el,options){var ins=([].slice.call(arguments,0),new _iScroll(el,options));return record(el,ins),ins},iScroll.prototype=_iScroll.prototype,$.fn.iScroll=function(opts){var ret,obj,args=slice.call(arguments,1),method="string"==typeof opts&&opts;return $.each(this,function(i,el){if(obj=record(el)||iScroll(el,$.isPlainObject(opts)?opts:undefined),"this"===method)return ret=obj,!1;if(method){if(!$.isFunction(obj[method]))throw new Error("iScroll没有此方法："+method);if(ret=obj[method].apply(obj,args),ret!==undefined&&ret!==obj)return!1;ret=undefined}}),ret!==undefined?ret:this}}}(window.Zepto||null,window)}(window,document),function(gmu,$){gmu.Navigator.options.iScroll={hScroll:!0,vScroll:!1,hScrollbar:!1,vScrollbar:!1},gmu.Navigator.register("scrollable",{_init:function(){var me=this,opts=me._options;me.on("done.dom",function(){me.$list.wrap('<div class="ui-scroller"></div>'),me.trigger("init.iScroll"),me.$el.iScroll($.extend({},opts.iScroll))}),$(window).on("ortchange"+me.eventNs,$.proxy(me.refresh,me)),me.on("destroy",function(){me.$el.iScroll("destroy"),$(window).off("ortchange"+me.eventNs)})},refresh:function(){this.trigger("refresh.iScroll").$el.iScroll("refresh")}})}(gmu,gmu.$),function(gmu,$){gmu.Navigator.options.visibleCount=4,gmu.Navigator.option("visibleCount","*",function(){function arrage(){var ort=window.innerWidth>window.innerHeight?"landscape":"portrait",count=counts[ort],$el=me.$el;me.$list.children().width($el.width()/count),me.$list.width($el.width()/count*me.$list.children().length)}var me=this,opts=me._options,counts="number"===$.type(opts.visibleCount)?{portrait:opts.visibleCount,landscape:Math.floor(3*opts.visibleCount/2)}:opts.visibleCount;me.on("init.iScroll refresh.iScroll",arrage)})}(gmu,gmu.$),function(gmu,$,undefined){gmu.Navigator.options.isScrollToNext=!0,gmu.Navigator.option("isScrollToNext",!0,function(){var prevIndex,me=this;me.on("select",function(e,to,el){prevIndex===undefined&&(prevIndex=me.index?0:1);var listOffset,dir=to>prevIndex,target=$(el)[dir?"next":"prev"](),offset=target.offset()||$(el).offset(),within=me.$el.offset();(dir?offset.left+offset.width>within.left+within.width:offset.left<within.left)&&(listOffset=me.$list.offset(),me.$el.iScroll("scrollTo",dir?within.width-offset.left+listOffset.left-offset.width:listOffset.left-offset.left,0,400)),prevIndex=to})})}(gmu,gmu.$),function(gmu,$){var cssPrefix=$.fx.cssPrefix,transitionEnd=$.fx.transitionEnd;gmu.define("Panel",{options:{contentWrap:"",scrollMode:"follow",display:"push",position:"right",dismissible:!0,swipeClose:!0},_init:function(){var me=this,opts=me._options;me.on("ready",function(){me.displayFn=me._setDisplay(),me.$contentWrap.addClass("ui-panel-animate"),me.$el.on(transitionEnd,$.proxy(me._eventHandler,me)).hide(),opts.dismissible&&me.$panelMask.hide().on("click",$.proxy(me._eventHandler,me)),"follow"!==opts.scrollMode&&$(window).on("scrollStop",$.proxy(me._eventHandler,me)),$(window).on("ortchange",$.proxy(me._eventHandler,me))})},_create:function(){if(!this._options.setup)throw new Error("panel组件不支持create模式，请使用setup模式");var me=this,opts=me._options,$el=me.$el.addClass("ui-panel ui-panel-"+opts.position);me.panelWidth=$el.width()||0,me.$contentWrap=$(opts.contentWrap||$el.next()),opts.dismissible&&(me.$panelMask=$('<div class="ui-panel-dismiss"></div>').width(document.body.clientWidth-$el.width()).appendTo("body")||null)},_setDisplay:function(){var panelPos,contPos,me=this,$panel=me.$el,$contentWrap=me.$contentWrap,transform=cssPrefix+"transform",posData=me._transDisplayToPos(),obj={};return $.each(["push","overlay","reveal"],function(i,display){obj[display]=function(isOpen,pos,isClear){return panelPos=posData[display].panel,contPos=posData[display].cont,$panel.css(transform,"translate3d("+me._transDirectionToPos(pos,panelPos[isOpen])+"px,0,0)"),isClear||($contentWrap.css(transform,"translate3d("+me._transDirectionToPos(pos,contPos[isOpen])+"px,0,0)"),me.maskTimer=setTimeout(function(){me.$panelMask&&me.$panelMask.css(pos,$panel.width()).toggle(isOpen)},400)),me}}),obj},_initPanelPos:function(dis,pos){return this.displayFn[dis](0,pos,!0),this.$el.get(0).clientLeft,this},_transDirectionToPos:function(pos,val){return"left"===pos?val:-val},_transDisplayToPos:function(){var me=this,panelWidth=me.panelWidth;return{push:{panel:[-panelWidth,0],cont:[0,panelWidth]},overlay:{panel:[-panelWidth,0],cont:[0,0]},reveal:{panel:[0,0],cont:[0,panelWidth]}}},_setShow:function(isOpen,dis,pos){var me=this,opts=me._options,eventName=isOpen?"open":"close",beforeEvent=$.Event("before"+eventName),changed=isOpen!==me.state(),_eventBinder=isOpen?"on":"off",_eventHandler=isOpen?$.proxy(me._eventHandler,me):me._eventHandler,_dis=dis||opts.display,_pos=pos||opts.position;return me.trigger(beforeEvent,[dis,pos]),beforeEvent.isDefaultPrevented()?me:(changed&&(me._dealState(isOpen,_dis,_pos),me.displayFn[_dis](me.isOpen=Number(isOpen),_pos),opts.swipeClose&&me.$el[_eventBinder]($.camelCase("swipe-"+_pos),_eventHandler),opts.display=_dis,opts.position=_pos),me)},_dealState:function(isOpen,dis,pos){var me=this,opts=me._options,$panel=me.$el,$contentWrap=me.$contentWrap,addCls="ui-panel-"+dis+" ui-panel-"+pos,removeCls="ui-panel-"+opts.display+" ui-panel-"+opts.position+" ui-panel-animate";return isOpen&&($panel.removeClass(removeCls).addClass(addCls).show(),"fix"===opts.scrollMode&&$panel.css("top",$(window).scrollTop()),me._initPanelPos(dis,pos),"reveal"===dis?$contentWrap.addClass("ui-panel-contentWrap").on(transitionEnd,$.proxy(me._eventHandler,me)):($contentWrap.removeClass("ui-panel-contentWrap").off(transitionEnd,$.proxy(me._eventHandler,me)),$panel.addClass("ui-panel-animate")),me.$panelMask&&me.$panelMask.css({left:"auto",right:"auto",height:document.body.clientHeight})),me},_eventHandler:function(e){var me=this,opts=me._options,scrollMode=opts.scrollMode,eventName=me.state()?"open":"close";switch(e.type){case"click":case"swipeLeft":case"swipeRight":me.close();break;case"scrollStop":"fix"===scrollMode?me.$el.css("top",$(window).scrollTop()):me.close();break;case transitionEnd:me.trigger(eventName,[opts.display,opts.position]);break;case"ortchange":me.$panelMask&&me.$panelMask.css("height",document.body.clientHeight),"fix"===scrollMode&&me.$el.css("top",$(window).scrollTop())}},open:function(display,position){return this._setShow(!0,display,position)},close:function(){return this._setShow(!1)},toggle:function(display,position){return this[this.isOpen?"close":"open"](display,position)},state:function(){return!!this.isOpen},destroy:function(){return this.$panelMask&&this.$panelMask.off().remove(),this.maskTimer&&clearTimeout(this.maskTimer),this.$contentWrap.removeClass("ui-panel-animate"),$(window).off("scrollStop",this._eventHandler),$(window).off("ortchange",this._eventHandler),this.$super("destroy")}})}(gmu,gmu.$),function(gmu){var Popover=gmu.Popover;Popover.template.arrow='<span class="ui-arrow"></span>',Popover.options.arrow=!0,Popover.option("arrow",!0,function(){var me=this,opts=me._options;opts.offset=opts.offset||function(coord,placement){return placement=placement.split("_")[0],{left:15*("left"===placement?-1:"right"===placement?1:0),top:15*("top"===placement?-1:"bottom"===placement?1:0)}},me.on("done.dom",function(e,$root){$root.append(me.tpl2html("arrow")).addClass("ui-pos-default")}),me.on("after.placement",function(e,coord,info){var root=this.$root[0],cls=root.className,placement=info.placement,align=info.align||"";root.className=cls.replace(/(?:\s|^)ui-pos-[^\s$]+/g,"")+" ui-pos-"+placement+(align?"-"+align:"")})})}(gmu),function(gmu,$){gmu.Popover.options.collision=!0,gmu.Popover.option("collision",!0,function(){function getWithinInfo(raw){var $el=$(raw);return raw=$el[0],raw!==window&&9!==raw.nodeType?$el.offset():{width:$el.width(),height:$el.height(),top:raw.pageYOffset||raw.scrollTop||0,left:raw.pageXOffset||raw.scrollLeft||0}}function isInside(coord,width,height,within){return coord.left>=within.left&&coord.left+width<=within.left+within.width&&coord.top>=within.top&&coord.top+height<=within.top+within.height}var me=this,opts=me._options;me.on("before.placement",function(e,coord,info,presets){var within=getWithinInfo(opts.within||window),now=info.placement,orig=info.coord,aviable=Object.keys(presets),idx=aviable.indexOf(now)+1,swap=aviable.splice(idx,aviable.length-idx);for(aviable=swap.concat(aviable);aviable.length&&!isInside(coord,orig.width,orig.height,within);)now=aviable.shift(),$.extend(coord,presets[now]());info.preset=now})})}(gmu,gmu.$),function(gmu,$){var Popover=gmu.Popover;Popover.options.dismissible=!0,Popover.option("dismissible",!0,function(){function isFromSelf(target){for(var doms=me.$target.add(me.$root).get(),i=doms.length;i--;)if(doms[i]===target||$.contains(doms[i],target))return!0;return!1}var me=this,$doc=$(document),click="click"+me.eventNs;me.on("show",function(){$doc.off(click).on(click,function(e){isFromSelf(e.target)||me.hide()})}),me.on("hide",function(){$doc.off(click)})})}(gmu,gmu.$),function(gmu,$){$.extend(gmu.Popover.options,{placement:"bottom",offset:null}),gmu.Popover.option("placement",function(val){return~["top","bottom","left","right"].indexOf(val)},function(){function getPos(pos,len){return"right"===pos||"bottom"===pos?len:"center"===pos?len/2:0}function placement(preset,atH,atV,myH,myV){var of=info.of,coord=info.coord,offset=info.offset,top=of.top,left=of.left;return left+=getPos(atH,of.width)-getPos(myH,coord.width),top+=getPos(atV,of.height)-getPos(myV,coord.height),offset="function"==typeof offset?offset.call(null,{left:left,top:top},preset):offset||{},{left:left+(offset.left||0),top:top+(offset.top||0)}}var info,me=this,config={top:"center top center bottom",right:"right center left center",bottom:"center bottom center top",left:"left center right center"},presets={};$.each(config,function(preset,args){args=args.split(/\s/g),args.unshift(preset),presets[preset]=function(){return placement.apply(null,args)}}),this.on("placement",function(e,$el,$of){var coord,me=this,opts=me._options,placement=opts.placement;info={coord:$el.offset(),of:$of.offset(),placement:placement,$el:$el,$of:$of,offset:opts.offset},coord=presets[placement](),me.trigger("before.placement",coord,info,presets),info.preset&&(info.placement=info.preset),$el.offset(coord),me.trigger("after.placement",coord,info)}),$(window).on("ortchange",function(){me._visible&&me.trigger("placement",me.$target,me.$root)})})}(gmu,gmu.$),function(gmu,$,undefined){gmu.define("Progressbar",{options:{initValue:0,horizontal:!0,transitionDuration:300,_isShow:!0,_current:0,_percent:0},_init:function(){var $el,_eventHandler,_button,_background,_offset,me=this;me.on("ready",function(){$el=me.$el,_eventHandler=$.proxy(me._eventHandler,me),_button=$el.find(".ui-progressbar-button"),_background=$el.find(".ui-progressbar-bg"),_offset=$el.offset(),_button.on("touchstart touchmove touchend touchcancel",_eventHandler),_background.on("touchstart",_eventHandler),$.extend(me._options,{_button:_button[0],$_background:_background,_filled:$el.find(".ui-progressbar-filled")[0],_width:_offset.width,_height:_offset.height}),me._options.horizontal&&_offset.width&&$el.width(_offset.width),me._options.initValue>0&&me.value(me._options.initValue)}),me.on("destroy",function(){me._options.setup||me.$el.remove()})},_create:function(){var me=this,direction=me._options.horizontal?"h":"v";me.$el||(me.$el=$("<div></div>")),me.$el.addClass("ui-progressbar-"+direction).appendTo(me._options.container||(me.$el.parent().length?"":document.body)).html('<div class="ui-progressbar-bg"><div class="ui-progressbar-filled"></div><div class="ui-progressbar-button"><div><b></b></div></div></div>')},_eventHandler:function(e){var me=this;switch(e.type){case"touchmove":me._touchMove(e);break;case"touchstart":$(e.target).hasClass("ui-progressbar-bg")?me._click(e):me._touchStart(e);break;case"touchcancel":case"touchend":me._touchEnd();break;case"tap":me._click(e)}},_touchStart:function(e){var me=this,opts=me._options;$.extend(me._options,{pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,S:!1,T:!1,X:0,Y:0}),opts._button.style.webkitTransitionDuration="0ms",opts._filled.style.webkitTransitionDuration="0ms",$(opts._button).addClass("ui-progressbar-button-pressed"),me.trigger("dragStart")},_touchMove:function(e){var _percent,me=this,opts=me._options,touch=e.touches[0],X=touch.pageX-opts.pageX,Y=touch.pageY-opts.pageY;if(!opts.T){var S=Math.abs(X)<Math.abs(touch.pageY-opts.pageY);opts.T=!0,opts.S=S}opts.horizontal?opts.S||(e.stopPropagation(),e.preventDefault(),_percent=(X+opts._current)/opts._width*100,100>=_percent&&_percent>=0&&(opts._percent=_percent,opts.X=X,opts._button.style.webkitTransform="translate3d("+(opts.X+opts._current)+"px,0,0)",opts._filled.style.width=_percent+"%",me.trigger("valueChange")),me.trigger("dragMove")):opts.S&&(e.stopPropagation(),e.preventDefault(),_percent=-(opts._current+Y)/opts._height*100,100>=_percent&&_percent>=0&&(opts._percent=_percent,opts.Y=Y,opts._button.style.webkitTransform="translate3d(0,"+(Y+opts._current)+"px,0)",opts._filled.style.cssText+="height:"+_percent+"%;top:"+(opts._height+Y+opts._current)+"px",me.trigger("valueChange")),me.trigger("dragMove"))},_touchEnd:function(){var me=this,opts=me._options;opts._current+=opts.horizontal?opts.X:opts.Y,$(opts._button).removeClass("ui-progressbar-button-pressed"),me.trigger("dragEnd")},_click:function(e){var me=this,opts=me._options,rect=opts.$_background.offset(),touch=e.touches[0];me.value(opts.horizontal?(touch.pageX-rect.left)/opts._width*100:(opts._height-touch.pageY+rect.top)/opts._height*100)},value:function(value){var _current,duration,me=this,opts=me._options;return value===undefined?opts._percent:(value=parseFloat(value),isNaN(value)?me:(value=value>100?100:0>value?0:value,opts._percent=value,duration=";-webkit-transition-duration:"+opts.transitionDuration+"ms",opts.horizontal?(_current=opts._current=opts._width*value/100,opts._button.style.cssText+="-webkit-transform:translate3d("+_current+"px,0,0)"+duration,opts._filled.style.cssText+="width:"+value+"%"+duration):(_current=opts._current=opts._height*value/-100,opts._button.style.cssText+="-webkit-transform:translate3d(0,"+_current+"px,0)"+duration,opts._filled.style.cssText+="height:"+value+"%;top:"+(opts._height+_current)+"px"+duration),me.trigger("valueChange"),me))},show:function(){var me=this;return me._options._isShow||(me.$el.css("display","block"),me._options._isShow=!0),me},hide:function(){var me=this;return me._options._isShow&&(me.$el.css("display","none"),me._options._isShow=!1),me}})}(gmu,gmu.$),function(gmu,$,undefined){gmu.define("Refresh",{options:{load:null,statechange:null},_init:function(){var me=this,opts=me._options;me.on("ready",function(){$.each(["up","down"],function(i,dir){var $elem=opts["$"+dir+"Elem"],elem=$elem.get(0);$elem.length&&(me._status(dir,!0),(!elem.childNodes.length||$elem.find(".ui-refresh-icon").length&&$elem.find(".ui-refresh-label").length)&&(!elem.childNodes.length&&me._createBtn(dir),opts.refreshInfo||(opts.refreshInfo={}),opts.refreshInfo[dir]={$icon:$elem.find(".ui-refresh-icon"),$label:$elem.find(".ui-refresh-label"),text:$elem.find(".ui-refresh-label").html()}),$elem.on("click",function(){me._status(dir)&&!opts._actDir&&(me._setStyle(dir,"loading"),me._loadingAction(dir,"click"))}))})}),me.on("destroy",function(){me.$el.remove()})},_create:function(){var me=this,opts=me._options,$el=me.$el;me._options.setup&&(opts.$upElem=$el.find(".ui-refresh-up"),opts.$downElem=$el.find(".ui-refresh-down"),$el.addClass("ui-refresh"))},_createBtn:function(dir){return this._options["$"+dir+"Elem"].html('<span class="ui-refresh-icon"></span><span class="ui-refresh-label">加载更多</span>'),this},_setStyle:function(dir,state){var me=this,stateChange=$.Event("statechange");return me.trigger(stateChange,me._options["$"+dir+"Elem"],state,dir),stateChange.defaultPrevented?me:me._changeStyle(dir,state)},_changeStyle:function(dir,state){var opts=this._options,refreshInfo=opts.refreshInfo[dir];switch(state){case"loaded":refreshInfo.$label.html(refreshInfo.text),refreshInfo.$icon.removeClass(),opts._actDir="";break;case"loading":refreshInfo.$label.html("加载中..."),refreshInfo.$icon.addClass("ui-loading"),opts._actDir=dir;break;case"disable":refreshInfo.$label.html("没有更多内容了")}return this},_loadingAction:function(dir,type){var me=this,opts=me._options,loadFn=opts.load;return $.isFunction(loadFn)&&loadFn.call(me,dir,type),me._status(dir,!1),me},afterDataLoading:function(dir){var me=this,dir=dir||me._options._actDir;return me._setStyle(dir,"loaded"),me._status(dir,!0),me},_status:function(dir,status){var opts=this._options;return status===undefined?opts["_"+dir+"Open"]:opts["_"+dir+"Open"]=!!status},_setable:function(able,dir,hide){var me=this,opts=me._options,dirArr=dir?[dir]:["up","down"];return $.each(dirArr,function(i,dir){var $elem=opts["$"+dir+"Elem"];$elem.length&&(able?$elem.show():hide?$elem.hide():me._setStyle(dir,"disable"),me._status(dir,able))}),me},disable:function(dir,hide){return this._setable(!1,dir,hide)},enable:function(dir){return this._setable(!0,dir)}})}(gmu,gmu.$),function(gmu,$){var cssPrefix=$.fx.cssPrefix,transitionEnd=$.fx.transitionEnd,translateZ=" translateZ(0)";gmu.define("Slider",{options:{loop:!1,speed:400,index:0,selector:{container:".ui-slider-group"}},template:{item:'<div class="ui-slider-item"><a href="<%= href %>"><img src="<%= pic %>" alt="" /></a><% if( title ) { %><p><%= title %></p><% } %></div>'},_create:function(){var me=this,$el=me.getEl(),opts=me._options;me.index=opts.index,me._initDom($el,opts),me._initWidth($el,me.index),me._container.on(transitionEnd+me.eventNs,$.proxy(me._tansitionEnd,me)),$(window).on("ortchange"+me.eventNs,function(){me._initWidth($el,me.index)})},_initDom:function($el,opts){var items,container,selector=opts.selector,viewNum=opts.viewNum||1;for(container=$el.find(selector.container),container.length||(container=$("<div></div>"),opts.content?this._createItems(container,opts.content):$el.is("ul")?(this.$el=container.insertAfter($el),container=$el,$el=this.$el):container.append($el.children()),container.appendTo($el)),(items=container.children()).length<viewNum+1&&(opts.loop=!1);opts.loop&&container.children().length<3*viewNum;)container.append(items.clone());this.length=container.children().length,this._items=(this._container=container).addClass("ui-slider-group").children().addClass("ui-slider-item").toArray(),this.trigger("done.dom",$el.addClass("ui-slider"),opts)},_createItems:function(container,items){for(var i=0,len=items.length;len>i;i++)container.append(this.tpl2html("item",items[i]))},_initWidth:function($el,index,force){var width,me=this;(force||(width=$el.width())!==me.width)&&(me.width=width,me._arrange(width,index),me.height=$el.height(),me.trigger("width.change"))},_arrange:function(width,index){var item,len,items=this._items,i=0;for(this._slidePos=new Array(items.length),len=items.length;len>i;i++)item=items[i],item.style.cssText+="width:"+width+"px;left:"+i*-width+"px;",item.setAttribute("data-index",i),this._move(i,index>i?-width:i>index?width:0,0);this._container.css("width",width*len)},_move:function(index,dist,speed,immediate){var slidePos=this._slidePos,items=this._items;slidePos[index]!==dist&&items[index]&&(this._translate(index,dist,speed),slidePos[index]=dist,immediate&&items[index].clientLeft)},_translate:function(index,dist,speed){var slide=this._items[index],style=slide&&slide.style;return style?void(style.cssText+=cssPrefix+"transition-duration:"+speed+"ms;"+cssPrefix+"transform: translate("+dist+"px, 0)"+translateZ+";"):!1},_circle:function(index,arr){var len;return arr=arr||this._items,len=arr.length,(index%len+len)%arr.length},_tansitionEnd:function(e){~~e.target.getAttribute("data-index")===this.index&&this.trigger("slideend",this.index)},_slide:function(from,diff,dir,width,speed,opts){var to,me=this;return to=me._circle(from-dir*diff),opts.loop||(dir=Math.abs(from-to)/(from-to)),this._move(to,-dir*width,0,!0),this._move(from,width*dir,speed),this._move(to,0,speed),this.index=to,this.trigger("slide",to,from)},slideTo:function(to,speed){if(this.index===to||this.index===this._circle(to))return this;var opts=this._options,index=this.index,diff=Math.abs(index-to),dir=diff/(index-to),width=this.width;return speed=speed||opts.speed,this._slide(index,diff,dir,width,speed,opts)},prev:function(){return(this._options.loop||this.index>0)&&this.slideTo(this.index-1),this},next:function(){return(this._options.loop||this.index+1<this.length)&&this.slideTo(this.index+1),this},getIndex:function(){return this.index},destroy:function(){return this._container.off(this.eventNs),$(window).off("ortchange"+this.eventNs),this.$super("destroy")}})}(gmu,gmu.$),function(gmu,$){$.extend(!0,gmu.Slider,{options:{autoPlay:!0,interval:4e3}}),gmu.Slider.register("autoplay",{_init:function(){var me=this;me.on("slideend ready",me.resume).on("destory",me.stop),me.getEl().on("touchstart"+me.eventNs,$.proxy(me.stop,me)).on("touchend"+me.eventNs,$.proxy(me.resume,me))},resume:function(){var me=this,opts=me._options;return opts.autoPlay&&!me._timer&&(me._timer=setTimeout(function(){me.slideTo(me.index+1),me._timer=null},opts.interval)),me},stop:function(){var me=this;return me._timer&&(clearTimeout(me._timer),me._timer=null),me}})}(gmu,gmu.$),function(gmu){gmu.Slider.template.item='<div class="ui-slider-item"><a href="<%= href %>"><img lazyload="<%= pic %>" alt="" /></a><% if( title ) { %><p><%= title %></p><% } %></div>',gmu.Slider.register("lazyloadimg",{_init:function(){this.on("ready slide",this._loadItems)},_loadItems:function(){var i,len,opts=this._options,loop=opts.loop,viewNum=opts.viewNum||1,index=this.index;for(i=index-viewNum,len=index+2*viewNum;len>i;i++)this.loadImage(loop?this._circle(i):i)},loadImage:function(index){var images,item=this._items[index];return item&&(images=gmu.staticCall(item,"find","img[lazyload]"),images.length)?void images.each(function(){this.src=this.getAttribute("lazyload"),this.removeAttribute("lazyload")}):this}})}(gmu),function(gmu,$,undefined){var isScrolling,start,delta,moved,map={touchstart:"_onStart",touchmove:"_onMove",touchend:"_onEnd",touchcancel:"_onEnd",click:"_onClick"};$.extend(gmu.Slider.options,{stopPropagation:!1,disableScroll:!1}),gmu.Slider.register("touch",{_init:function(){var me=this,$el=me.getEl();me._handler=function(e){return me._options.stopPropagation&&e.stopPropagation(),map[e.type]&&me[map[e.type]].call(me,e)},me.on("ready",function(){$el.on("touchstart"+me.eventNs,me._handler),me._container.on("click"+me.eventNs,me._handler)})},_onClick:function(){return!moved},_onStart:function(e){if(e.touches.length>1)return!1;var num,me=this,touche=e.touches[0],opts=me._options,eventNs=me.eventNs;start={x:touche.pageX,y:touche.pageY,time:+new Date},delta={},moved=!1,isScrolling=undefined,num=opts.viewNum||1,me._move(opts.loop?me._circle(me.index-num):me.index-num,-me.width,0,!0),me._move(opts.loop?me._circle(me.index+num):me.index+num,me.width,0,!0),me.$el.on("touchmove"+eventNs+" touchend"+eventNs+" touchcancel"+eventNs,me._handler)},_onMove:function(e){if(e.touches.length>1||e.scale&&1!==e.scale)return!1;var i,len,pos,slidePos,opts=this._options,viewNum=opts.viewNum||1,touche=e.touches[0],index=this.index;if(opts.disableScroll&&e.preventDefault(),delta.x=touche.pageX-start.x,delta.y=touche.pageY-start.y,"undefined"==typeof isScrolling&&(isScrolling=Math.abs(delta.x)<Math.abs(delta.y)),!isScrolling){for(e.preventDefault(),opts.loop||(delta.x/=!index&&delta.x>0||index===this._items.length-1&&delta.x<0?Math.abs(delta.x)/this.width+1:1),slidePos=this._slidePos,i=index-viewNum,len=index+2*viewNum;len>i;i++)pos=opts.loop?this._circle(i):i,this._translate(pos,delta.x+slidePos[pos],0);moved=!0}},_onEnd:function(){if(this.$el.off("touchmove"+this.eventNs+" touchend"+this.eventNs+" touchcancel"+this.eventNs,this._handler),moved){var speed,diff,i,len,pos,me=this,opts=me._options,viewNum=opts.viewNum||1,index=me.index,slidePos=me._slidePos,duration=+new Date-start.time,absDeltaX=Math.abs(delta.x),isPastBounds=!opts.loop&&(!index&&delta.x>0||index===slidePos.length-viewNum&&delta.x<0),dir=delta.x>0?1:-1;if(250>duration?(speed=absDeltaX/duration,diff=Math.min(Math.round(speed*viewNum*1.2),viewNum)):diff=Math.round(absDeltaX/(me.perWidth||me.width)),diff&&!isPastBounds)me._slide(index,diff,dir,me.width,opts.speed,opts,!0),viewNum>1&&duration>=250&&Math.ceil(absDeltaX/me.perWidth)!==diff&&(me.index<index?me._move(me.index-1,-me.perWidth,opts.speed):me._move(me.index+viewNum,me.width,opts.speed));
else for(i=index-viewNum,len=index+2*viewNum;len>i;i++)pos=opts.loop?me._circle(i):i,me._translate(pos,slidePos[pos],opts.speed)}}})}(gmu,gmu.$),function(gmu,$){$.extend(!0,gmu.Slider,{template:{prev:'<span class="ui-slider-pre"></span>',next:'<span class="ui-slider-next"></span>'},options:{arrow:!0,select:{prev:".ui-slider-pre",next:".ui-slider-next"}}}),gmu.Slider.option("arrow",!0,function(){var me=this,arr=["prev","next"];this.on("done.dom",function(e,$el,opts){var selector=opts.selector;arr.forEach(function(name){var item=$el.find(selector[name]);item.length||$el.append(item=$(me.tpl2html(name))),me["_"+name]=item})}),this.on("ready",function(){arr.forEach(function(name){me["_"+name].on("tap"+me.eventNs,function(){me[name].call(me)})})}),this.on("destroy",function(){me._prev.off(me.eventNs),me._next.off(me.eventNs)})})}(gmu,gmu.$),function(gmu,$){$.extend(!0,gmu.Slider,{template:{dots:'<p class="ui-slider-dots"><%= new Array( len + 1 ).join("<b></b>") %></p>'},options:{dots:!0,selector:{dots:".ui-slider-dots"}}}),gmu.Slider.option("dots",!0,function(){var updateDots=function(to,from){var dots=this._dots;"undefined"==typeof from||gmu.staticCall(dots[from%this.length],"removeClass","ui-state-active"),gmu.staticCall(dots[to%this.length],"addClass","ui-state-active")};this.on("done.dom",function(e,$el,opts){var dots=$el.find(opts.selector.dots);dots.length||(dots=this.tpl2html("dots",{len:this.length}),dots=$(dots).appendTo($el)),this._dots=dots.children().toArray()}),this.on("slide",function(e,to,from){updateDots.call(this,to,from)}),this.on("ready",function(){updateDots.call(this,this.index)})})}(gmu,gmu.$),function(gmu){gmu.Slider.options.imgZoom=!0,gmu.Slider.option("imgZoom",function(){return!!this._options.imgZoom},function(){function unWatch(){watches&&watches.off("load"+me.eventNs,imgZoom)}function watch(){unWatch(),watches=me._container.find(selector).on("load"+me.eventNs,imgZoom)}function imgZoom(e){var img=e.target||this,scale=Math.min(1,me.width/img.naturalWidth,me.height/img.naturalHeight);img.style.width=scale*img.naturalWidth+"px"}var watches,me=this,selector=me._options.imgZoom;selector="string"==typeof selector?selector:"img",me.on("ready dom.change",watch),me.on("width.change",function(){watches&&watches.each(imgZoom)}),me.on("destroy",unWatch)})}(gmu),function($,win){var guid=0;gmu.define("Suggestion",{options:{historyShare:!0,confirmClearHistory:!0,autoClose:!1},template:{wrapper:'<div class="ui-suggestion"><div class="ui-suggestion-content"></div><div class="ui-suggestion-button"><span class="ui-suggestion-clear">清除历史记录</span><span class="ui-suggestion-close">关闭</span></div></div>'},_initDom:function(){var me=this,$input=me.getEl().attr("autocomplete","off"),$parent=$input.parent(".ui-suggestion-mask");return $parent.length?me.$mask=$parent:$input.wrap(me.$mask=$('<div class="ui-suggestion-mask"></div>')),me.$mask.append(me.tpl2html("wrapper")),me.$wrapper=me.$mask.find(".ui-suggestion").prop("id","ui-suggestion-"+guid++),me.$content=me.$wrapper.css("top",$input.height()+(me.wrapperTop=parseInt(me.$wrapper.css("top"),10)||0)).find(".ui-suggestion-content"),me.$btn=me.$wrapper.find(".ui-suggestion-button"),me.$clearBtn=me.$btn.find(".ui-suggestion-clear"),me.$closeBtn=me.$btn.find(".ui-suggestion-close"),me.trigger("initdom")},_bindEvent:function(){var me=this,$el=me.getEl(),ns=me.eventNs;return me._options.autoClose&&$(document).on("tap"+ns,function(e){!$.contains(me.$mask.get(0),e.target)&&me.hide()}),$el.on("focus"+ns,function(){!me.isShow&&me._showList().trigger("open")}),$el.on("input"+ns,function(){me._showList()}),me.$clearBtn.on("click"+ns,function(){me.history(null)}).highlight("ui-suggestion-highlight"),me.$closeBtn.on("click"+ns,function(){me.getEl().blur(),me.hide().trigger("close")}).highlight("ui-suggestion-highlight"),me},_create:function(){var me=this,opts=me._options,hs=opts.historyShare;return opts.container&&(me.$el=$(opts.container)),me.key=hs?("boolean"===$.type(hs)?"":hs+"-")+"SUG-Sharing-History":me.getEl().attr("id")||"ui-suggestion-"+guid++,me.separator=encodeURIComponent(","),me._initDom()._bindEvent(),me},_showList:function(){var data,me=this,query=me.value();return query?me.trigger("sendrequest",query,$.proxy(me._render,me),$.proxy(me._cacheData,me)):(data=me._localStorage())?me._render(query,data.split(me.separator)):me.hide(),me},_render:function(query,data){this.trigger("renderlist",data,query,$.proxy(this._fillWrapper,this))},_fillWrapper:function(listHtml){return this.$clearBtn[this.value()?"hide":"show"](),listHtml?(this.$content.html(listHtml),this.show()):this.hide(),this},_localStorage:function(value){var localStorage,data,me=this,key=me.key,separator=me.separator;try{if(localStorage=win.localStorage,void 0===value)return localStorage[key];null===value?localStorage[key]="":value&&(data=localStorage[key]?localStorage[key].split(separator):[],~$.inArray(value,data)||(data.unshift(value),localStorage[key]=data.join(separator)))}catch(ex){console.log(ex.message)}return me},_cacheData:function(key,value){return this.cacheData||(this.cacheData={}),void 0!==value?this.cacheData[key]=value:this.cacheData[key]},value:function(){return this.getEl().val()},history:function(value){var me=this,clearHistory=null!==value||function(){return me._localStorage(null).hide()};return null===value?me._options.confirmClearHistory?win.confirm("清除全部查询历史记录？")&&clearHistory():clearHistory():me._localStorage(value)},show:function(){return this.isShow?this:(this.$wrapper.show(),this.isShow=!0,this.trigger("show"))},hide:function(){return this.isShow?(this.$wrapper.hide(),this.isShow=!1,this.trigger("hide")):this},destroy:function(){var me=this,$el=me.getEl(),ns=me.ns;return me.trigger("destroy"),$el.off(ns),me.$mask.replaceWith($el),me.$clearBtn.off(ns),me.$closeBtn.off(ns),me.$wrapper.children().off().remove(),me.$wrapper.remove(),me._options.autoClose&&$(document).off(ns),this.destroyed=!0,me}})}(gmu.$,window),function(gmu,$){gmu.Suggestion.register("iscroll",{_init:function(){var me=this;return me.on("ready",function(){me.$scroller=$('<div class="ui-suggestion-scroller"></div>'),me.$content.wrapInner(me.$scroller).iScroll({hScroll:!1,onRefresh:function(){this.y&&this.scrollTo(0,0)}}),me.on("destroy",function(){me.$content.iScroll("destroy")})}),me},_fillWrapper:function(listHtml){return this.$clearBtn[this.value()?"hide":"show"](),listHtml?(this.show().$scroller.html(listHtml),this.$content.iScroll("refresh")):this.hide(),this}})}(gmu,gmu.$),function($,win){var reverse=Array.prototype.reverse;gmu.Suggestion.options.listSelector="li",gmu.Suggestion.register("posadapt",{_init:function(){var $list,me=this;me.on("show ortchange",function(){me._checkPos()&&(me.$wrapper.css("top",-me.$wrapper.height()-me.wrapperTop),reverse.call($list=me.$content.find(me._options.listSelector)),$list.appendTo($list.parent()),me.$btn.prependTo(me.$wrapper))})},_checkPos:function(){var sugH=this._options.height||66,upDis=this.getEl().offset().top-win.pageYOffset;return $(win).height()-upDis<sugH&&upDis>=sugH}})}(gmu.$,window),function(gmu,$){gmu.Suggestion.register("quickdelete",{_init:function(){var $input,ns,me=this;me.on("ready",function(){$input=me.getEl(),ns=me.eventNs,me.$mask.append(me.$quickDel=$('<div class="ui-suggestion-quickdel"></div>')),$input.on("focus"+ns+" input"+ns,function(){me["_quickDel"+($.trim($input.val())?"Show":"Hide")]()}),$input.on("blur"+ns,function(){me._quickDelHide()}),me.$quickDel.on("touchstart"+ns,function(e){e.preventDefault(),e.formDelete=!0,$input.val(""),me.trigger("delete").trigger("input")._quickDelHide(),$input.blur().focus()}),me.on("destroy",function(){me.$quickDel.off().remove()})})},_quickDelShow:function(){this.quickDelShow||(gmu.staticCall(this.$quickDel.get(0),"css","visibility","visible"),this.quickDelShow=!0)},_quickDelHide:function(){this.quickDelShow&&(gmu.staticCall(this.$quickDel.get(0),"css","visibility","hidden"),this.quickDelShow=!1)}})}(gmu,gmu.$),function($,win){gmu.Suggestion.options.compatdata=!0,gmu.Suggestion.option("compatdata",!0,function(){this.on("ready",function(){var localdata,dataArr,key=this.key,flagKey="SUG-History-DATATRANS";try{localdata=win.localStorage[key],localdata&&!win.localStorage[flagKey]&&(win.localStorage[flagKey]="",dataArr=localdata.split(","),win.localStorage[key]=dataArr.join(this.separator))}catch(e){console.log(e.message)}})})}(gmu.$,window),function($){$.extend(gmu.Suggestion.options,{isHistory:!0,usePlus:!1,listCount:5,renderlist:null}),gmu.Suggestion.option("renderlist",function(){return"function"!==$.type(this._options.renderlist)},function(){var me=this,$xssElem=$("<div></div>"),_xssFilter=function(str){return $xssElem.text(str).html()},_createList=function(query,sugs){var sug,len,i,opts=me._options,html=[],str="";if(!sugs||!sugs.length)return me.hide(),html;for(sugs=sugs.slice(0,opts.listCount),query=_xssFilter(query||""),i=0,len=sugs.length;len>i;i++)str=_xssFilter(sug=sugs[i]),query&&(str=$.trim(sug).replace(query,"<span>"+query+"</span>")),opts.usePlus&&(str+='<div class="ui-suggestion-plus" data-item="'+sug+'"></div>'),html.push("<li>"+str+"</li>");return html};me.on("ready",function(){var me=this,ns=me.eventNs,$form=$(me._options.form||me.getEl().closest("form"));$form.size()&&(me.$form=$form.on("submit"+ns,function(e){var submitEvent=gmu.Event("submit");me._options.isHistory&&me._localStorage(me.value()),me.trigger(submitEvent),submitEvent.isDefaultPrevented()&&e.preventDefault()})),me.$content.on("touchstart"+ns,function(e){e.preventDefault()}),me.$content.on("tap"+ns,function(e){var $input=me.getEl(),$elem=$(e.target);$elem.hasClass("ui-suggestion-plus")?$input.val($elem.attr("data-item")):$.contains(me.$content.get(0),$elem.get(0))&&setTimeout(function(){$input.val($elem.text()),me.trigger("select",$elem).hide().$form.submit()},400)}).highlight("ui-suggestion-highlight"),me.on("destroy",function(){$form.size()&&$form.off(ns),me.$content.off()})}),me.on("renderlist",function(e,data,query,callback){var ret=_createList(query,data);return callback(ret.length?"<ul>"+ret.join(" ")+"</ul>":"")})})}(gmu.$),function($,win){$.extend(gmu.Suggestion.options,{isCache:!0,queryKey:"wd",cbKey:"cb",sendrequest:null}),gmu.Suggestion.option("sendrequest",function(){return"function"!==$.type(this._options.sendrequest)},function(){var cdata,me=this,opts=me._options,queryKey=opts.queryKey,cbKey=opts.cbKey,param=opts.param,isCache=opts.isCache;this.on("sendrequest",function(e,query,callback,cacheData){var url=opts.source,cb="suggestion_"+ +new Date;return isCache&&(cdata=cacheData(query))?(callback(query,cdata),me):(url=(url+"&"+queryKey+"="+encodeURIComponent(query)).replace(/[&?]{1,2}/,"?"),!~url.indexOf("&"+cbKey)&&(url+="&"+cbKey+"="+cb),param&&(url+="&"+param),win[cb]=function(data){callback(query,data.s),isCache&&cacheData(query,data.s),delete win[cb]},$.ajax({url:url,dataType:"jsonp"}),me)})})}(gmu.$,window),function(gmu,$,undefined){var _uid=1,uid=function(){return _uid++},idRE=/^#(.+)$/;gmu.define("Tabs",{options:{active:0,items:null,transition:"slide"},template:{nav:'<ul class="ui-tabs-nav"><% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %><li<% if(i==active){ %> class="ui-state-active"<% } %>><a href="javascript:;"><%=item.title%></a></li><% } %></ul>',content:'<div class="ui-viewport ui-tabs-content"><% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %><div<% if(item.id){ %> id="<%=item.id%>"<% } %> class="ui-tabs-panel <%=transition%><% if(i==active){ %> ui-state-active<% } %>"><%=item.content%></div><% } %></div>'},_init:function(){var $el,me=this,_opts=me._options,eventHandler=$.proxy(me._eventHandler,me);me.on("ready",function(){$el=me.$el,$el.addClass("ui-tabs"),_opts._nav.on("tap",eventHandler).children().highlight("ui-state-hover")}),$(window).on("ortchange",eventHandler)},_create:function(){var me=this,_opts=me._options;me._options.setup&&me.$el.children().length>0?me._prepareDom("setup",_opts):(_opts.setup=!1,me.$el=me.$el||$("<div></div>"),me._prepareDom("create",_opts))},_prepareDom:function(mode,_opts){var items,nav,contents,id,me=this,$el=me.$el;switch(mode){case"setup":if(_opts._nav=me._findElement("ul").first(),_opts._nav){_opts._content=me._findElement("div.ui-tabs-content"),_opts._content=(_opts._content&&_opts._content.first()||$("<div></div>").appendTo($el)).addClass("ui-viewport ui-tabs-content"),items=[],_opts._nav.addClass("ui-tabs-nav").children().each(function(){var id,$content,$a=me._findElement("a",this),href=$a?$a.attr("href"):$(this).attr("data-url");id=idRE.test(href)?RegExp.$1:"tabs_"+uid(),($content=me._findElement("#"+id)||$('<div id="'+id+'"></div>')).addClass("ui-tabs-panel"+(_opts.transition?" "+_opts.transition:"")).appendTo(_opts._content),items.push({id:id,href:href,title:$a?$a.attr("href","javascript:;").text():$(this).text(),content:$content})}),_opts.items=items,_opts.active=Math.max(0,Math.min(items.length-1,_opts.active||$(".ui-state-active",_opts._nav).index()||0)),me._getPanel().add(_opts._nav.children().eq(_opts.active)).addClass("ui-state-active");break}default:items=_opts.items=_opts.items||[],nav=[],contents=[],_opts.active=Math.max(0,Math.min(items.length-1,_opts.active)),$.each(items,function(key,val){id="tabs_"+uid(),nav.push({href:val.href||"#"+id,title:val.title}),contents.push({content:val.content||"",id:id}),items[key].id=id}),_opts._nav=$(this.tpl2html("nav",{items:nav,active:_opts.active})).prependTo($el),_opts._content=$(this.tpl2html("content",{items:contents,active:_opts.active,transition:_opts.transition})).appendTo($el),_opts.container=_opts.container||($el.parent().length?null:"body")}_opts.container&&$el.appendTo(_opts.container),me._fitToContent(me._getPanel())},_getPanel:function(index){var _opts=this._options;return $("#"+_opts.items[index===undefined?_opts.active:index].id)},_findElement:function(selector,el){var ret=$(el||this.$el).find(selector);return ret.length?ret:null},_eventHandler:function(e){var match,_opts=this._options;switch(e.type){case"ortchange":this.refresh();break;default:(match=$(e.target).closest("li",_opts._nav.get(0)))&&match.length&&(e.preventDefault(),this.switchTo(match.index()))}},_fitToContent:function(div){var _opts=this._options,$content=_opts._content;return _opts._plus===undefined&&(_opts._plus=parseFloat($content.css("border-top-width"))+parseFloat($content.css("border-bottom-width"))),$content.height(div.height()+_opts._plus),this},switchTo:function(index){var eventData,to,from,reverse,endEvent,me=this,_opts=me._options,items=_opts.items;if(!_opts._buzy&&_opts.active!=(index=Math.max(0,Math.min(items.length-1,index)))){if(to=$.extend({},items[index]),to.div=me._getPanel(index),to.index=index,from=$.extend({},items[_opts.active]),from.div=me._getPanel(),from.index=_opts.active,eventData=gmu.Event("beforeActivate"),me.trigger(eventData,to,from),eventData.isDefaultPrevented())return me;_opts._content.children().removeClass("ui-state-active"),to.div.addClass("ui-state-active"),_opts._nav.children().removeClass("ui-state-active").eq(to.index).addClass("ui-state-active"),_opts.transition&&(_opts._buzy=!0,endEvent=$.fx.animationEnd+".tabs",reverse=index>_opts.active?"":" reverse",_opts._content.addClass("ui-viewport-transitioning"),from.div.addClass("out"+reverse),to.div.addClass("in"+reverse).on(endEvent,function(e){e.target==e.currentTarget&&(to.div.off(endEvent,arguments.callee),_opts._buzy=!1,from.div.removeClass("out reverse"),to.div.removeClass("in reverse"),_opts._content.removeClass("ui-viewport-transitioning"),me.trigger("animateComplete",to,from),me._fitToContent(to.div))})),_opts.active=index,me.trigger("activate",to,from),_opts.transition||me._fitToContent(to.div)}return me},refresh:function(){return this._fitToContent(this._getPanel())},destroy:function(){var _opts=this._options,eventHandler=this._eventHandler;return _opts._nav.off("tap",eventHandler).children().highlight(),_opts.swipe&&_opts._content.off("swipeLeft swipeRight",eventHandler),_opts.setup||this.$el.remove(),this.$super("destroy")}})}(gmu,gmu.$),function($){var idRE=/^#.+$/,loaded={},tpl={loading:'<div class="ui-loading">Loading</div>',error:'<p class="ui-load-error">内容加载失败!</p>'};gmu.Tabs.register("ajax",{_init:function(){var items,i,length,_opts=this._options;this.on("ready",function(){for(items=_opts.items,i=0,length=items.length;length>i;i++)items[i].href&&!idRE.test(items[i].href)&&(items[i].isAjax=!0);this.on("activate",this._onActivate),items[_opts.active].isAjax&&this.load(_opts.active)})},destroy:function(){return this.off("activate",this._onActivate),this.xhr&&this.xhr.abort(),this.origin()},_fitToContent:function(div){var _opts=this._options;return _opts._fitLock?void 0:this.origin(div)},_onActivate:function(e,to){to.isAjax&&this.load(to.index)},load:function(index,force){var item,$panel,prevXHR,me=this,_opts=me._options,items=_opts.items;return 0>index||index>items.length-1||!(item=items[index])||!item.isAjax||($panel=me._getPanel(index)).text()&&!force&&loaded[index]?this:((prevXHR=me.xhr)&&setTimeout(function(){prevXHR.abort()},400),_opts._loadingTimer=setTimeout(function(){$panel.html(tpl.loading)},50),_opts._fitLock=!0,void(me.xhr=$.ajax($.extend(_opts.ajax||{},{url:item.href,context:me.$el.get(0),beforeSend:function(xhr,settings){var eventData=gmu.Event("beforeLoad");return me.trigger(eventData,xhr,settings),eventData.isDefaultPrevented()?!1:void 0},success:function(response,xhr){var eventData=gmu.Event("beforeRender");clearTimeout(_opts._loadingTimer),me.trigger(eventData,response,$panel,index,xhr),eventData.isDefaultPrevented()||$panel.html(response),_opts._fitLock=!1,loaded[index]=!0,me.trigger("load",$panel),delete me.xhr,me._fitToContent($panel)},error:function(){var eventData=gmu.Event("loadError");clearTimeout(_opts._loadingTimer),loaded[index]=!1,me.trigger(eventData,$panel),eventData.isDefaultPrevented()||$panel.html(tpl.error),delete me.xhr}}))))}})}(Zepto),function($,undefined){function tabsSwipeEvents(){$(document).on("touchstart.tabs",function(e){var start,stop,point=e.touches?e.touches[0]:e;start={x:point.clientX,y:point.clientY,time:Date.now(),el:$(e.target)},$(document).on("touchmove.tabs",function(e){var xDelta,point=e.touches?e.touches[0]:e;start&&(stop={x:point.clientX,y:point.clientY,time:Date.now()},(xDelta=Math.abs(start.x-stop.x))>scrollSupressionThreshold||xDelta>Math.abs(start.y-stop.y)?isFromTabs(e.target)&&e.preventDefault():$(document).off("touchmove.tabs touchend.tabs"))}).one("touchend.tabs",function(){$(document).off("touchmove.tabs"),start&&stop&&stop.time-start.time<durationThreshold&&Math.abs(start.x-stop.x)>horizontalDistanceThreshold&&Math.abs(start.y-stop.y)<verticalDistanceThreshold&&start.el.trigger(start.x>stop.x?"tabsSwipeLeft":"tabsSwipeRight"),start=stop=undefined})})}var durationThreshold=1e3,horizontalDistanceThreshold=30,verticalDistanceThreshold=70,scrollSupressionThreshold=30,tabs=[],eventBinded=!1,isFromTabs=function(target){for(var i=tabs.length;i--;)if($.contains(tabs[i],target))return!0;return!1};gmu.Tabs.register("swipe",{_init:function(){var _opts=this._options;this.on("ready",function(){tabs.push(_opts._content.get(0)),eventBinded=eventBinded||(tabsSwipeEvents(),!0),this.$el.on("tabsSwipeLeft tabsSwipeRight",$.proxy(this._eventHandler,this))})},_eventHandler:function(e){var items,index,_opts=this._options;switch(e.type){case"tabsSwipeLeft":case"tabsSwipeRight":items=_opts.items,"tabsSwipeLeft"==e.type&&_opts.active<items.length-1?index=_opts.active+1:"tabsSwipeRight"==e.type&&_opts.active>0&&(index=_opts.active-1),index!==undefined&&(e.stopPropagation(),this.switchTo(index));break;default:return this.origin(e)}},destroy:function(){var idx,_opts=this._options;return~(idx=$.inArray(_opts._content.get(0),tabs))&&tabs.splice(idx,1),this.$el.off("tabsSwipeLeft tabsSwipeRight",this._eventHandler),tabs.length||($(document).off("touchstart.tabs"),eventBinded=!1),this.origin()}})}(Zepto),function(gmu,$){gmu.define("Toolbar",{options:{container:document.body,title:"标题",leftBtns:[],rightBtns:[],fixed:!1},_init:function(){var $el,me=this,opts=me._options;opts.container||(opts.container=document.body),me.on("ready",function(){if($el=me.$el,opts.fixed){var offHandle,placeholder=$('<div class="ui-toolbar-placeholder"></div>').height($el.offset().height).insertBefore($el).append($el).append($el.clone().css({"z-index":1,position:"absolute",top:0})),top=$el.offset().top,check=function(){document.body.scrollTop>top?$el.css({position:"fixed",top:0}):$el.css("position","absolute")};$(window).on("touchmove touchend touchcancel scroll scrollStop",check),$(document).on("touchend touchcancel",offHandle=function(){setTimeout(function(){check()},200)}),me.on("destroy",function(){$(window).off("touchmove touchend touchcancel scroll scrollStop",check),$(document).off("touchend touchcancel",offHandle),$el.insertBefore(placeholder),placeholder.remove(),me._removeDom()}),check()}}),me.on("destroy",function(){me._removeDom()})},_create:function(){var me=this,opts=me._options,$el=me.getEl(),container=$(opts.container),children=[],btnGroups=me.btnGroups={left:[],right:[]},currentGroup=btnGroups.left;opts.setup||($el&&$el.length>0?$el.appendTo(container):$el=me.$el=$("<div>").appendTo(container)),children=$el.children(),$toolbarWrap=$el.find(".ui-toolbar-wrap"),0===$toolbarWrap.length?$toolbarWrap=$('<div class="ui-toolbar-wrap"></div>').appendTo($el):children=$toolbarWrap.children(),children.forEach(function(child){$toolbarWrap.append(child),/^[hH]/.test(child.tagName)?(currentGroup=btnGroups.right,me.title=child):currentGroup.push(child)});var leftBtnContainer=$toolbarWrap.find(".ui-toolbar-left"),rightBtnContainer=$toolbarWrap.find(".ui-toolbar-right");0===leftBtnContainer.length&&(leftBtnContainer=children.length?$('<div class="ui-toolbar-left">').insertBefore(children[0]):$('<div class="ui-toolbar-left">').appendTo($toolbarWrap),btnGroups.left.forEach(function(btn){$(btn).addClass("ui-toolbar-button"),leftBtnContainer.append(btn)}),rightBtnContainer=$('<div class="ui-toolbar-right">').appendTo($toolbarWrap),btnGroups.right.forEach(function(btn){$(btn).addClass("ui-toolbar-button"),rightBtnContainer.append(btn)})),$el.addClass("ui-toolbar"),$(me.title).length?$(me.title).addClass("ui-toolbar-title"):$('<h1 class="ui-toolbar-title">'+opts.title+"</h1>").insertAfter(leftBtnContainer),me.btnContainer={left:leftBtnContainer,right:rightBtnContainer},me.addBtns("left",opts.leftBtns),me.addBtns("right",opts.rightBtns)},_addBtn:function(container,btn){$(btn).appendTo(container).addClass("ui-toolbar-button")},addBtns:function(position,btns){var me=this,btnContainer=me.btnContainer[position],toString=Object.prototype.toString;return"[object String]"!=toString.call(position)&&(btns=position,btnContainer=me.btnContainer.right),btns.forEach(function(btn){btn instanceof gmu.Base&&(btn=btn.getEl()),me._addBtn(btnContainer,btn)}),me},show:function(){var me=this;return me.$el.show(),me.trigger("show"),me.isShowing=!0,me},hide:function(){var me=this;return me.$el.hide(),me.trigger("hide"),me.isShowing=!1,me},toggle:function(){var me=this;return me.isShowing===!1?me.show():me.hide(),me},_removeDom:function(){var me=this,$el=me.$el;me._options.setup===!1?$el.remove():$el.css("position","static").css("top","auto")}})}(gmu,gmu.$),function(gmu){gmu.Toolbar.register("position",{position:function(opts){return this.$el.fix(opts),this}})}(gmu,gmu.$),function(gmu,$){gmu.Refresh.register("iOS5",{_init:function(){var me=this,opts=me._options,$el=me.$el;$el.css({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),opts.topOffset=opts.$upElem?opts.$upElem.height():0,opts.iScroll=me._getiScroll(),$el.get(0).scrollTop=opts.topOffset,$el.on("touchstart touchmove touchend",$.proxy(me._eventHandler,me))},_changeStyle:function(dir,state){var me=this,opts=me._options,refreshInfo=opts.refreshInfo[dir];switch(me.origin(dir,state),state){case"loaded":refreshInfo.$icon.addClass("ui-refresh-icon"),opts._actDir="";break;case"beforeload":refreshInfo.$label.html("松开立即加载"),refreshInfo.$icon.addClass("ui-refresh-flip");break;case"loading":refreshInfo.$icon.removeClass().addClass("ui-loading")}return me},_scrollStart:function(e){var me=this,opts=me._options,topOffset=opts.topOffset,$upElem=opts.$upElem,wrapper=me.$el.get(0),_scrollFn=function(){clearTimeout(opts.topOffsetTimer),$upElem&&$upElem.length&&wrapper.scrollTop<=topOffset&&!opts._upRefreshed&&(wrapper.scrollTop=topOffset)};return me.trigger("scrollstart",e),me._enableScroll()._bindScrollStop(wrapper,_scrollFn),opts.maxScrollY=wrapper.offsetHeight-wrapper.scrollHeight,opts._scrollFn=_scrollFn,me},_scrollMove:function(){var me=this,opts=me._options,up=opts.$upElem&&opts.$upElem.length,down=opts.$downElem&&opts.$downElem.length,wrapper=me.$el.get(0),threshold=opts.threshold||5;me._scrollMove=function(e){var maxScrollY=opts.maxScrollY,scrollY=wrapper.scrollTop,lastMoveY=opts.lastMoveY||scrollY,upRefreshed=opts._upRefreshed,downRefreshed=opts._downRefreshed,upStatus=me._status("up"),downStatus=me._status("down");if(!(up&&!upStatus||down&&!downStatus))return opts.iScroll.deltaY=scrollY-lastMoveY,downStatus&&down&&!downRefreshed&&maxScrollY-threshold>-scrollY?me._setMoveState("down","beforeload","pull"):downStatus&&down&&downRefreshed&&-scrollY>maxScrollY-threshold&&-scrollY!==maxScrollY?me._setMoveState("down","loaded","restore"):upStatus&&up&&!upRefreshed&&-scrollY>threshold?me._setMoveState("up","beforeload","pull"):upStatus&&up&&upRefreshed&&threshold>-scrollY&&scrollY&&me._setMoveState("up","loaded","restore"),opts.lastMoveY=scrollY,opts._moved=!0,me.trigger("scrollmove",e,scrollY,scrollY-lastMoveY)},me._scrollMove.apply(me,arguments)},_scrollEnd:function(e){var me=this,opts=me._options,wrapper=me.$el.get(0),topOffset=opts.topOffset,actDir=opts._actDir,restoreDir=opts._restoreDir;return("up"==restoreDir||wrapper.scrollTop<=topOffset)&&!actDir&&opts._moved&&(me._options.topOffsetTimer=setTimeout(function(){$(wrapper).off("scroll",opts._scrollFn),wrapper.scrollTop=topOffset},800)),actDir&&me._status(actDir)&&(me._setStyle(actDir,"loading"),me._loadingAction(actDir,"pull")),opts._moved=!1,me.trigger("scrollend",e)},_enableScroll:function(){var me=this,wrapper=me.$el.get(0),scrollY=wrapper.scrollTop;return 0>=scrollY&&(wrapper.scrollTop=1),scrollY+wrapper.offsetHeight>=wrapper.scrollHeight&&(wrapper.scrollTop=wrapper.scrollHeight-wrapper.offsetHeight-1),me},_bindScrollStop:function(elem,fn){var me=this,$elem=$(elem);return $elem.off("scroll",me._options._scrollFn).on("scroll",$.debounce(100,function(){$elem.off("scroll",arguments.callee).one("scroll",fn)},!1)),me},_getiScroll:function(){var me=this,$wrapper=me.$el,wrapper=$wrapper[0];return{el:wrapper,deltaY:0,scrollTo:function(y,time,relative){relative&&(y=wrapper.scrollTop+y),$wrapper.css({"-webkit-transition-property":"scrollTop","-webkit-transition-duration":y+"ms"}),wrapper.scrollTop=y},disable:function(destroy){destroy&&me.destroy(),$wrapper.css("overflow","hidden")},enable:function(){$wrapper.css("overflow","scroll")}}},_setMoveState:function(dir,state,actType){var me=this,opts=me._options;return me._setStyle(dir,state),opts["_"+dir+"Refreshed"]="pull"==actType,opts._actDir="pull"==actType?dir:"",opts._restoreDir="up"==dir&&"restore"==actType?dir:"",me},_eventHandler:function(e){var me=this;switch(e.type){case"touchstart":me._scrollStart(e);break;case"touchmove":me._scrollMove(e);break;case"touchend":me._scrollEnd(e)}},afterDataLoading:function(dir){var me=this,opts=me._options,dir=dir||opts._actDir;return opts["_"+dir+"Refreshed"]=!1,"up"==dir&&(me.$el.get(0).scrollTop=opts.topOffset),me.origin(dir)}})}(gmu,gmu.$),!function(){function a(a){return a.replace(t,"").replace(u,",").replace(v,"").replace(w,"").replace(x,"").split(y)}function b(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function c(c,d){function e(a){return m+=a.split(/\n/).length-1,k&&(a=a.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),a&&(a=s[1]+b(a)+s[2]+"\n"),a}function f(b){var c=m;if(j?b=j(b,d):g&&(b=b.replace(/\n/g,function(){return m++,"$line="+m+";"})),0===b.indexOf("=")){var e=l&&!/^=[=#]/.test(b);if(b=b.replace(/^=[=#]?|[\s;]*$/g,""),e){var f=b.replace(/\s*\([^\)]+\)/,"");n[f]||/^(include|print)$/.test(f)||(b="$escape("+b+")")}else b="$string("+b+")";b=s[1]+b+s[2]}return g&&(b="$line="+c+";"+b),r(a(b),function(a){if(a&&!p[a]){var b;b="print"===a?u:"include"===a?v:n[a]?"$utils."+a:o[a]?"$helpers."+a:"$data."+a,w+=a+"="+b+",",p[a]=!0}}),b+"\n"}var g=d.debug,h=d.openTag,i=d.closeTag,j=d.parser,k=d.compress,l=d.escape,m=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},q="".trim,s=q?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],t=q?"$out+=text;return $out;":"$out.push(text);",u="function(){var text=''.concat.apply('',arguments);"+t+"}",v="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+t+"}",w="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(g?"$line=0,":""),x=s[0],y="return new String("+s[3]+");";r(c.split(h),function(a){a=a.split(i);var b=a[0],c=a[1];1===a.length?x+=e(b):(x+=f(b),c&&(x+=e(c)))});var z=w+x+y;g&&(z="try{"+z+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+b(c)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var A=new Function("$data","$filename",z);return A.prototype=n,A}catch(B){throw B.temp="function anonymous($data,$filename) {"+z+"}",B}}var d=function(a,b){return"string"==typeof b?q(b,{filename:a}):g(a,b)};d.version="3.0.0",d.config=function(a,b){e[a]=b};var e=d.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},f=d.cache={};d.render=function(a,b){return q(a,b)};var g=d.renderFile=function(a,b){var c=d.get(a)||p({filename:a,name:"Render Error",message:"Template not found"});return b?c(b):c};d.get=function(a){var b;if(f[a])b=f[a];else if("object"==typeof document){var c=document.getElementById(a);if(c){var d=(c.value||c.innerHTML).replace(/^\s*|\s*$/g,"");b=q(d,{filename:a})}}return b};var h=function(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?h(a.call(a)):""),a},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},j=function(a){return i[a]},k=function(a){return h(a).replace(/&(?![\w#]+;)|[<>"']/g,j)},l=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},m=function(a,b){var c,d;if(l(a))for(c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)},n=d.utils={$helpers:{},$include:g,$string:h,$escape:k,$each:m};d.helper=function(a,b){o[a]=b};var o=d.helpers=n.$helpers;d.onerror=function(a){var b="Template Error\n\n";for(var c in a)b+="<"+c+">\n"+a[c]+"\n\n";"object"==typeof console&&console.error(b)};var p=function(a){return d.onerror(a),function(){return"{Template Error}"}},q=d.compile=function(a,b){function d(c){try{return new i(c,h)+""}catch(d){return b.debug?p(d)():(b.debug=!0,q(a,b)(c))}}b=b||{};for(var g in e)void 0===b[g]&&(b[g]=e[g]);var h=b.filename;try{var i=c(a,b)}catch(j){return j.filename=h||"anonymous",j.name="Syntax Error",p(j)}return d.prototype=i.prototype,d.toString=function(){return i.toString()},h&&b.cache&&(f[h]=d),d},r=n.$each,s="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",t=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,u=/[^\w$]+/g,v=new RegExp(["\\b"+s.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),w=/^\d[^,]*|,\d[^,]*/g,x=/^,+|,+$/g,y=/^$|,+/;e.openTag="{{",e.closeTag="}}";var z=function(a,b){var c=b.split(":"),d=c.shift(),e=c.join(":")||"";
return e&&(e=", "+e),"$helpers."+d+"("+a+e+")"};e.parser=function(a){a=a.replace(/^\s/,"");var b=a.split(" "),c=b.shift(),e=b.join(" ");switch(c){case"if":a="if("+e+"){";break;case"else":b="if"===b.shift()?" if("+b.join(" ")+")":"",a="}else"+b+"{";break;case"/if":a="}";break;case"each":var f=b[0]||"$data",g=b[1]||"as",h=b[2]||"$value",i=b[3]||"$index",j=h+","+i;"as"!==g&&(f="[]"),a="$each("+f+",function("+j+"){";break;case"/each":a="});";break;case"echo":a="print("+e+");";break;case"print":case"include":a=c+"("+b.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(e)){var k=!0;0===a.indexOf("#")&&(a=a.substr(1),k=!1);for(var l=0,m=a.split("|"),n=m.length,o=m[l++];n>l;l++)o=z(o,m[l]);a=(k?"=":"=#")+o}else a=d.helpers[c]?"=#"+c+"("+b.join(",")+");":"="+a}return a},"function"==typeof define?define(function(){return d}):"undefined"!=typeof exports?module.exports=d:this.template=d}(),function($){$.extend($.fn,{cookie:function(key,value,options){var days,time,result,decode;return arguments.length>1&&"[object Object]"!==String(value)?(options=$.extend({},options),(null===value||void 0===value)&&(options.expires=-1),"number"==typeof options.expires&&(days=24*options.expires*60*60*1e3,time=options.expires=new Date,time.setTime(time.getTime()+days)),value=String(value),document.cookie=[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")):(options=value||{},decode=options.raw?function(s){return s}:decodeURIComponent,(result=new RegExp("(?:^|; )"+encodeURIComponent(key)+"=([^;]*)").exec(document.cookie))?decode(result[1]):null)}})}(Zepto),function($){function visible(elem){return elem=$(elem),!(!elem.width()&&!elem.height())&&"none"!==elem.css("display")}function process(sel,fn){sel=sel.replace(/=#\]/g,'="#"]');var filter,arg,match=filterRe.exec(sel);if(match&&match[2]in filters&&(filter=filters[match[2]],arg=match[3],sel=match[1],arg)){var num=Number(arg);arg=isNaN(num)?arg.replace(/^["']|["']$/g,""):num}return fn(sel,filter,arg)}var zepto=$.zepto,oldQsa=zepto.qsa,oldMatches=zepto.matches,filters=$.expr[":"]={visible:function(){return visible(this)?this:void 0},hidden:function(){return visible(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(idx){return 0===idx?this:void 0},last:function(idx,nodes){return idx===nodes.length-1?this:void 0},eq:function(idx,_,value){return idx===value?this:void 0},contains:function(idx,_,text){return $(this).text().indexOf(text)>-1?this:void 0},has:function(idx,_,sel){return zepto.qsa(this,sel).length?this:void 0}},filterRe=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),childRe=/^\s*>/,classTag="Zepto"+ +new Date;zepto.qsa=function(node,selector){return process(selector,function(sel,filter,arg){try{var taggedParent;!sel&&filter?sel="*":childRe.test(sel)&&(taggedParent=$(node).addClass(classTag),sel="."+classTag+" "+sel);var nodes=oldQsa(node,sel)}catch(e){throw console.error("error performing selector: %o",selector),e}finally{taggedParent&&taggedParent.removeClass(classTag)}return filter?zepto.uniq($.map(nodes,function(n,i){return filter.call(n,i,nodes,arg)})):nodes})},zepto.matches=function(node,selector){return process(selector,function(sel,filter,arg){return!(sel&&!oldMatches(node,sel)||filter&&filter.call(node,null,arg)!==node)})}}(Zepto);